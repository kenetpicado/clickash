import{_ as S}from"./StatCard-ff179e1a.js";import{_ as B,I as L}from"./ClientareaLayout-cae29f17.js";import{_ as $}from"./Invoice-bcf5781e.js";import{_ as F}from"./InputForm-b3d4eebc.js";import{t as j}from"./toast-a35b6174.js";import{r as x,x as q,p as D,h as E,j as V,m as M,a as P,o,k as h,f as u,d as m,t as T,b as g,u as r,c as f,l as b,F as I,g as U,n as w,e as z}from"./app-b9c931a0.js";import{d as G,u as O,a as A}from"./switch-8e63ec62.js";import"./createVueComponent-5a0326f8.js";import"./DropdownItem-b62aa329.js";import"./useAuth-6ae4d293.js";import"./IconUser-5bef4d49.js";function H(){const l=x({}),d=x(!1);async function v(i={},c=!1){d.value=!0,q.get(route("api.invoices.index"),{params:i}).then(e=>{c?(l.value.data=l.value.data.concat(e.data.data),l.value.links=e.data.links):l.value=e.data}).catch(e=>{j.error(n(e))}).finally(()=>{d.value=!1})}function n(i){var c,e;return((e=(c=i.response)==null?void 0:c.data)==null?void 0:e.message)??i.message}return{invoices:l,isLoading:d,getInvoices:v}}const J={class:"title"},K={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},Q={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},R={class:"flex items-center mb-5"},W={key:0,class:"w-full text-center text-gray-400"},X={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4"},ce={__name:"Show",props:{seller:{type:Object,required:!0}},setup(l){const d=l,v=D(()=>{var t,a;return[{title:"Total",value:(a=(t=n.value)==null?void 0:t.total)==null?void 0:a.toLocaleString(),icon:L}]}),{invoices:n,getInvoices:i,isLoading:c}=H(),e=E({date:localStorage.getItem("invoice_date")||"",trashed:localStorage.getItem("invoice_trashed")==="true"}),p=x(null);V(()=>e,()=>{p.value=null;for(const t in e)localStorage.setItem("invoice_"+t,e[t]);_()},{deep:!0}),V(()=>p.value,()=>{_()}),M(()=>{_()});function _(){let t={...e,page:p.value};for(const a in t)t[a]||delete t[a];i({user_id:d.seller.id,...t},t.page>1)}function C(){p.value=n.value.links.next.split("page=")[1]}return(t,a)=>{const N=P("loading");return o(),h(B,{title:"Ventas"},{header:u(()=>[m("span",J,T(l.seller.name),1)]),default:u(()=>{var y,k;return[g(N,{active:r(c),"is-full-page":!0},null,8,["active"]),m("div",K,[g(F,{modelValue:e.date,"onUpdate:modelValue":a[0]||(a[0]=s=>e.date=s),text:"Fecha",type:"date"},null,8,["modelValue"])]),m("div",Q,[(o(!0),f(I,null,b(v.value,s=>(o(),h(S,{stat:s,key:s.title},null,8,["stat"]))),128))]),g(r(A),null,{default:u(()=>[m("div",R,[g(r(G),{class:"mr-4 text-gray-400"},{default:u(()=>[U("Ver eliminadas")]),_:1}),g(r(O),{modelValue:e.trashed,"onUpdate:modelValue":a[1]||(a[1]=s=>e.trashed=s),class:w([e.trashed?"bg-primary":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full transition-colors"])},{default:u(()=>[m("span",{class:w([e.trashed?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition-transform"])},null,2)]),_:1},8,["modelValue","class"])])]),_:1}),((y=r(n).data)==null?void 0:y.length)==0?(o(),f("div",W," No hay transacciones ")):(o(),f("div",X,[(o(!0),f(I,null,b(r(n).data,s=>(o(),h($,{invoice:s,key:s.invoice_number},null,8,["invoice"]))),128))])),(k=r(n).links)!=null&&k.next?(o(),f("div",{key:2,class:"w-full text-center text-green-pea-400",onClick:C,role:"button"}," Cargar m√°s ")):z("",!0)]}),_:1})}}};export{ce as default};
