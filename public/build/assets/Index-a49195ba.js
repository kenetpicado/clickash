import{T as q,r as b,g as E,o as f,c as g,b as l,F as x,h as j,t as y,a,e as v,u as o,d as B,j as A}from"./app-f92a6350.js";import{t as m}from"./toast-c1861280.js";import{c as L,I as M}from"./helpers-38f2496b.js";import{_ as O}from"./FormModal-d1b8486c.js";import{_ as w}from"./InputForm-ef68cc6a.js";import{_ as p,a as U}from"./Dropdown-6e8150d4.js";import{I as z,a as T}from"./IconReportAnalytics-6074e8d5.js";import{I as F}from"./IconEdit-78704188.js";import{c as G}from"./createVueComponent-0e3384b4.js";import{_ as R}from"./ClientareaLayout-b5ae82d4.js";import{_ as H}from"./Tabs-d5426e80.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./IconList-a114a6b9.js";var J=G("lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]);function K(){const s=q({id:"",name:"",email:" ",password:"",password_confirmation:""});function u(r=null){if(s.password!==s.password_confirmation){m.error("Las contraseñas no coinciden");return}s.post(route("clientarea.sellers.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.success("Guardado correctamente"),r&&r()},onError:t=>{m.error(t.message),r&&r()}})}function d(r=null){s.put(route("clientarea.sellers.update",s.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.success("Actualizado correctamente"),r&&r()}})}function n(r=null){s.put(route("clientarea.toggle-status",s.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.success("Actualizado correctamente"),r&&r()}})}function _(r){L({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{s.delete(route("clientarea.sellers.destroy",r),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.success("Eliminado correctamente")}})}})}return{form:s,store:u,update:d,destroy:_,toggleStatus:n}}const P={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Q={class:"bg-card rounded-xl p-2 w-full"},W={class:"flex gap-2 w-full"},X=l("div",{class:"bg-white rounded-xl w-1/3 px-1"},[l("img",{src:"/images/vendedor.png",alt:"",class:"w-20 h-20 object-contain"})],-1),Y={class:"text-xs text-gray-600 w-full h-full"},Z={class:"flex justify-between w-full"},D={class:""},ee={class:"px-1 py-1"},te={class:"px-1 py-1"},se={class:"flex flex-col"},re={class:"text-base"},oe={__name:"SellerTab",props:{sellers:{type:Object,required:!0},triggerNew:{type:Boolean,required:!0}},setup(s){const u=s,d=b(!1),n=b(!0),{store:_,update:r,form:t,toggleStatus:V,destroy:k}=K(),C=i=>{t.id=i,V()},I=()=>{n.value?_(h):r(h)},h=()=>{t.reset(),n.value=!0,d.value=!1},$=i=>{n.value=!1,t.id=i.id,t.name=i.name,t.email=i.email,d.value=!0};E(()=>u.triggerNew,i=>{n.value=!0,d.value=!0});const N={enabled:"Bloquear",disabled:"Desbloquear"};return(i,c)=>(f(),g(x,null,[l("div",P,[(f(!0),g(x,null,j(s.sellers,e=>(f(),g("div",Q,[l("div",W,[X,l("div",Y,[l("div",Z,[l("span",D,y(e.status=="enabled"?"Activo":"Inactivo"),1),a(U,null,{default:v(()=>[l("div",ee,[a(p,{href:i.route("clientarea.sellers.show",e.id),title:"Ventas",icon:o(z)},null,8,["href","icon"]),a(p,{href:i.route("clientarea.sellers.archings.index",e.id),title:"Caja",icon:o(T)},null,8,["href","icon"])]),l("div",te,[a(p,{onClick:S=>$(e),title:"Editar",icon:o(F)},null,8,["onClick","icon"]),a(p,{onClick:S=>C(e.id),title:N[e.status],icon:o(J)},null,8,["onClick","title","icon"]),a(p,{onClick:S=>o(k)(e.id),title:"Eliminar",icon:o(M)},null,8,["onClick","icon"])])]),_:2},1024)]),l("div",se,[l("span",re,y(e.name),1),l("span",null,y(e.email),1)])])])]))),256))]),a(O,{show:d.value,title:"Vendedor",onOnCancel:h,onOnSubmit:I},{default:v(()=>[a(w,{text:"Nombre",modelValue:o(t).name,"onUpdate:modelValue":c[0]||(c[0]=e=>o(t).name=e),required:""},null,8,["modelValue"]),a(w,{text:"Correo",modelValue:o(t).email,"onUpdate:modelValue":c[1]||(c[1]=e=>o(t).email=e),type:"email",required:"",autocomple:"nope"},null,8,["modelValue"]),n.value?(f(),g(x,{key:0},[a(w,{text:"Contraseña",modelValue:o(t).password,"onUpdate:modelValue":c[2]||(c[2]=e=>o(t).password=e),type:"password",required:""},null,8,["modelValue"]),a(w,{text:"Confirmar contraseña",modelValue:o(t).password_confirmation,"onUpdate:modelValue":c[3]||(c[3]=e=>o(t).password_confirmation=e),type:"password",required:""},null,8,["modelValue"])],64)):B("",!0)]),_:1},8,["show"])],64))}},le=l("span",{class:"title"}," Vendedores ",-1),he={__name:"Index",props:{sellers:{type:Object,required:!0}},setup(s){const u=b(!1);return(d,n)=>(f(),A(R,{title:"Inicio"},{options:v(()=>[a(H)]),header:v(()=>[le,l("button",{onClick:n[0]||(n[0]=_=>u.value=!u.value),type:"button",class:"simple-button"}," Nuevo ")]),default:v(()=>[a(oe,{sellers:s.sellers,triggerNew:u.value},null,8,["sellers","triggerNew"])]),_:1}))}};export{he as default};
