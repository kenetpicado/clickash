import{_ as I}from"./AddButton-ed42e778.js";import{_ as x,a as M}from"./Dropdown-ae72984e.js";import{_ as V}from"./Checkbox-bbebc6fa.js";import{_ as r}from"./InputForm-7d6766da.js";import{_ as C}from"./FormModal-675b8ad6.js";import{T as O,h as v,k as q,o as g,g as L,e as f,a as i,b as a,c as b,l as B,t as y,u as s,F as j,d as E}from"./app-e7b8d848.js";import{t as d}from"./toast-648f1ae8.js";import{_ as F}from"./AppLayout-8e17da7c.js";import{c as T}from"./IconUser-26e3f79d.js";import{I as z}from"./IconEdit-276c5730.js";import"./use-resolve-button-type-33c3a454.js";import"./IconList-32df74cb.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./IconUsers-7492abcc.js";var G=T("copy","IconCopy",[["path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2",key:"svg-1"}]]);function H(){const o=O({id:"",name:"",image:"",settings:{min:null,max:null,date:!1,super_x:!1,general_limit:null,individual_limit:null,multiplier:70}});function _(n=null){o.post(route("dashboard.raffles.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{d.success("Raffle created successfully"),n&&n()}})}function m(n=null){o.put(route("dashboard.raffles.update",o.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{d.success("Raffle updated successfully"),n&&n()}})}function c(n=null){o.put(route("dashboard.raffles.clone",o.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{d.success("Rifa clonada con éxito"),n&&n()}})}return{form:o,store:_,update:m,clone:c}}const X=a("span",{class:"title"}," Rifa ",-1),A={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},J={class:"bg-card rounded-xl p-2 w-full"},K={class:"flex justify-between"},P={class:"mb-2"},Q={class:"px-1 py-1"},W={class:"text-xs text-gray-600"},Y={class:"bg-white w-full p-3"},Z={class:"grid grid-cols-2 gap-4"},D={class:"grid grid-cols-2 gap-4 mb-1"},ee={key:0,class:"grid grid-cols-2 gap-4"},ge={__name:"Index",props:{raffles:{type:Object,required:!0}},setup(o){const _=[{name:"Home",route:route("dashboard.raffles.index")},{name:"Rifas",route:route("dashboard.raffles.index")}],m=v(!1),c=v(!1),n=v(!0),{store:k,update:h,form:e,clone:N}=H();function S(u){Object.assign(e,u),m.value=!0,n.value=!1}q(()=>e.settings.date,u=>{u&&(e.settings.min=null,e.settings.max=null)});function $(){if(isNaN(e.settings.min)){d.error("Min must be a number");return}if(isNaN(e.settings.max)){d.error("Max must be a number");return}if(isNaN(e.settings.general_limit)){d.error("General Limit must be a number");return}if(isNaN(e.settings.individual_limit)){d.error("Individual Limit must be a number");return}n.value?k(p):h(p)}const p=()=>{e.reset(),m.value=!1,c.value=!1,n.value=!0};function w(u){e.id=u.id,e.name=u.name+" (Copia)",c.value=!0}function U(){N(p)}return(u,l)=>(g(),L(F,{title:"Rifa",breads:_},{header:f(()=>[X,i(I,{onClick:l[0]||(l[0]=t=>m.value=!0)})]),default:f(()=>[a("div",A,[(g(!0),b(j,null,B(o.raffles,t=>(g(),b("div",J,[a("div",K,[a("span",P,y(t.name),1),i(M,null,{default:f(()=>[a("div",Q,[i(x,{onClick:R=>w(t),title:"Clonar",icon:s(G)},null,8,["onClick","icon"]),i(x,{onClick:R=>S(t),title:"Editar",icon:s(z)},null,8,["onClick","icon"])])]),_:2},1024)]),a("div",W,[a("pre",Y,y(t.settings),1)])]))),256))]),i(C,{show:m.value,title:"Rifa",onOnCancel:p,onOnSubmit:$},{default:f(()=>[i(r,{text:"Nombre",modelValue:s(e).name,"onUpdate:modelValue":l[1]||(l[1]=t=>s(e).name=t)},null,8,["modelValue"]),i(r,{text:"Imagen",modelValue:s(e).image,"onUpdate:modelValue":l[2]||(l[2]=t=>s(e).image=t),type:"url"},null,8,["modelValue"]),a("div",Z,[i(r,{text:"Limite general C$",modelValue:s(e).settings.general_limit,"onUpdate:modelValue":l[3]||(l[3]=t=>s(e).settings.general_limit=t),type:"number"},null,8,["modelValue"]),i(r,{text:"Limite indiv. C$",modelValue:s(e).settings.individual_limit,"onUpdate:modelValue":l[4]||(l[4]=t=>s(e).settings.individual_limit=t),type:"number"},null,8,["modelValue"])]),a("div",D,[i(V,{checked:s(e).settings.super_x,"onUpdate:checked":l[5]||(l[5]=t=>s(e).settings.super_x=t),text:"Super X"},null,8,["checked"]),i(V,{checked:s(e).settings.date,"onUpdate:checked":l[6]||(l[6]=t=>s(e).settings.date=t),text:"Fecha"},null,8,["checked"])]),s(e).settings.date?E("",!0):(g(),b("div",ee,[i(r,{text:"Número inicio",modelValue:s(e).settings.min,"onUpdate:modelValue":l[7]||(l[7]=t=>s(e).settings.min=t),required:"",type:"number"},null,8,["modelValue"]),i(r,{text:"Número final",modelValue:s(e).settings.max,"onUpdate:modelValue":l[8]||(l[8]=t=>s(e).settings.max=t),required:"",type:"number"},null,8,["modelValue"])])),i(r,{text:"Multiplicador",modelValue:s(e).settings.multiplier,"onUpdate:modelValue":l[9]||(l[9]=t=>s(e).settings.multiplier=t),type:"number",required:""},null,8,["modelValue"])]),_:1},8,["show"]),i(C,{show:c.value,title:"Clonar",onOnCancel:p,onOnSubmit:U},{default:f(()=>[i(r,{text:"Nuevo nombre",modelValue:s(e).name,"onUpdate:modelValue":l[10]||(l[10]=t=>s(e).name=t),required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{ge as default};
