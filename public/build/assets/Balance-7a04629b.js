import{_ as E,a as I}from"./DropdownItem-ecf5ef59.js";import{_ as b}from"./InputForm-7d88ca6a.js";import{_ as w}from"./SelectForm-12eaa51f.js";import{_ as B}from"./FormModal-578f1fd3.js";import{_ as T}from"./StatCard-71b3c1b1.js";import{_ as R}from"./ClientareaLayout-ce97ec01.js";import{C as y}from"./Carbon-e7b34390.js";import{c as j}from"./helpers-9d6b9840.js";import{t as h}from"./toast-ce812ad7.js";import{m as q,r as D,T as L,e as M,l as N,o as a,k as x,g as d,b as t,t as m,a as c,c as l,u as n,f as S,F as C,O}from"./app-5a1c8b3e.js";import{I as f}from"./IconCurrencyDollar-f8083fdc.js";import{I as P}from"./IconTrash-a85cadc6.js";import"./IconList-d7f8d95e.js";import"./createVueComponent-d6d00449.js";import"./IconSettings-3e5d8cf0.js";import"./_plugin-vue_export-helper-c27b6911.js";const A={class:"title"},U={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},F={key:0,class:"mb-4"},Y={key:1,class:"mb-4"},H={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8"},z={class:"flex items-center justify-between mb-4 text-gray-600"},G=t("span",{class:"title"}," Movimientos ",-1),J={key:2,class:"text-center text-gray-400 mb-4"},K={key:3,class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},Q={class:"bg-card p-3 rounded-xl"},W={class:"flex items-center justify-between"},X={class:"text-gray-400 text-sm mb-2"},Z={class:"flex items-center justify-between"},ee={class:"text-sm text-gray-600 font-bold"},te={class:"text-xl text-gray-600 font-bold"},ae=t("option",{value:"RETIRO"},"RETIRO",-1),se=t("option",{value:"DEPOSITO"},"DEPOSITO",-1),xe={__name:"Balance",props:{balance:{type:Object,required:!0},seller:{type:Object,required:!0},archings:{type:Object,required:!0}},setup(u){const r=u,s=q({date:""}),_=D(!1),i=L({id:null,type:"RETIRO",amount:null}),g=new URLSearchParams(window.location.search);g.get("date")&&(s.date=g.get("date")),M(()=>[s.date],([p])=>{p||delete s.date,O.get(route("clientarea.sellers.balance",r.seller.id),s,{preserveState:!0,preserveScroll:!0,only:["balance","archings"]})});const $=N(()=>[{title:"Ingresos",value:"C$"+r.balance.income.toLocaleString(),icon:f},{title:"Egresos",value:"C$"+r.balance.expenditure.toLocaleString(),icon:f},{title:"Balance",value:"C$"+(r.balance.income-r.balance.expenditure).toLocaleString(),icon:f}]);function v(){i.reset(),_.value=!1}function k(){i.post(route("clientarea.sellers.archings.store",r.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{v(),h.success("Movimiento agregado")}})}function V(p){j({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{O.delete(route("clientarea.sellers.archings.destroy",[r.seller.id,p]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h.success("Eliminado correctamente")}})}})}return(p,o)=>(a(),x(R,{title:"Balance"},{header:d(()=>[t("span",A," Balance: "+m(u.seller.name),1)]),default:d(()=>[t("div",U,[c(b,{modelValue:s.date,"onUpdate:modelValue":o[0]||(o[0]=e=>s.date=e),text:"Fecha",type:"date"},null,8,["modelValue"])]),s.date?(a(),l("h2",Y,"Balance del DIA "+m(n(y).create(s.date).format("d/m/Y")),1)):(a(),l("h2",F,"Balance de la SEMANA en curso")),t("div",H,[(a(!0),l(C,null,S($.value,e=>(a(),x(T,{stat:e,key:e.title},null,8,["stat"]))),128))]),t("div",z,[G,t("button",{onClick:o[1]||(o[1]=e=>_.value=!0),type:"button",class:"simple-button"}," Nuevo ")]),u.archings.data.length==0?(a(),l("div",J," No hay movimientos ")):(a(),l("div",K,[(a(!0),l(C,null,S(u.archings.data,e=>(a(),l("div",Q,[t("div",W,[t("div",X,m(n(y).create(e.created_at).format("d/m/Y H:i")),1),c(E,null,{default:d(()=>[c(I,{onClick:oe=>V(e.id),title:"Eliminar",icon:n(P)},null,8,["onClick","icon"])]),_:2},1024)]),t("div",Z,[t("span",ee,m(e.type),1),t("span",te," C$"+m(e.amount),1)])]))),256))])),c(B,{show:_.value,title:"Movimiento",onOnCancel:v,onOnSubmit:k},{default:d(()=>[c(w,{modelValue:n(i).type,"onUpdate:modelValue":o[2]||(o[2]=e=>n(i).type=e),text:"Tipo",required:""},{default:d(()=>[ae,se]),_:1},8,["modelValue"]),c(b,{modelValue:n(i).amount,"onUpdate:modelValue":o[3]||(o[3]=e=>n(i).amount=e),type:"number",text:"Cantidad",required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{xe as default};
