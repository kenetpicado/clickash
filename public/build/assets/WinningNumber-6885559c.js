import{a as S,_ as T}from"./Dropdown-e1924e60.js";import{_ as k}from"./InputForm-eb6d3e97.js";import{_ as N}from"./SelectForm-cd5b3418.js";import{_ as j}from"./FormModal-043c6cec.js";import{o as e,c as n,b as a,t as u,m as O,r as V,T as E,k as F,g as B,j as c,e as m,F as h,h as v,a as y,u as s,f as $,d as I}from"./app-1dd10d1c.js";import{_ as A}from"./Transaction-949a4888.js";import{_ as D}from"./ClientareaLayout-83178c54.js";import{C as f}from"./Carbon-e7b34390.js";import{c as w,I as G}from"./helpers-162b7779.js";import{t as g}from"./toast-df71d12e.js";import{c as U}from"./createVueComponent-5af52e38.js";import"./IconList-b1cc1c73.js";import"./_plugin-vue_export-helper-c27b6911.js";var M=U("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);const Y={class:"bg-card h-20 rounded-xl"},z={class:"flex h-full items-center justify-between p-4"},H={class:"text-gray-600"},L={class:"font-bold text-lg"},P={class:"text-sm"},R={__name:"StatCardActions",props:{stat:{type:Object,required:!0}},setup(i){return(d,_)=>(e(),n("div",Y,[a("div",z,[a("div",H,[a("div",L,u(i.stat.value),1),a("div",P,u(i.stat.title),1)]),a("div",null,[O(d.$slots,"default")])])]))}},W=a("span",{class:"title"}," Ganadores ",-1),J={key:0,class:"w-full text-center text-gray-400 mb-4"},K={key:1,class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},Q={class:"px-1 py-1"},X=a("div",{class:"text-2xl font-extrabold text-gray-600 mb-2"}," Transacciones ",-1),Z={key:2,class:"w-full text-center text-gray-400"},ee={key:3,class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4"},te={key:0,class:"text-red-500 mb-4"},re=a("option",{value:"",disabled:"",selected:""},"Seleccione un turno",-1),se=["value"],ae=a("div",{class:"text-gray-400 text-sm"}," Verifique que los datos ingresados sean correctos antes de guardar, ya que para garantizar la integridad de los datos no se permite eliminar ni editar los resultados. ",-1),oe={key:4,class:"mt-5 text-basic"},ne={class:"font-bold"},xe={__name:"WinningNumber",props:{winning_numbers:{type:Object,required:!0},winners:{type:Object,required:!0},hours:{type:Object,required:!0},settings:{type:Object,required:!0},raffle:{type:Object,required:!0}},setup(i){const d=i,_=V(!1),p=V(""),r=E({number:null,hour:null}),x=F(()=>d.winning_numbers.map(o=>({id:o.id,title:"Turno: "+f.create().setTime(o.hour).getTimeFormat(),value:"Dígito: "+o.number,icon:M})));function b(){r.reset(),_.value=!1}B(()=>p.value,o=>{o?r.number=f.create(o).format("d/m"):r.number=null});const C=()=>{if(d.winning_numbers.find(o=>o.hour==r.hour)){g.error("Ya existe un resultado para este turno");return}w({title:"Confirmar",message:"¿Esta seguro de agregar este resultado?",onConfirm:()=>{r.post(route("clientarea.raffles.winning-numbers.store",d.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),g.success("Guardado correctamente")}})}})};function q(o){w({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{r.delete(route("clientarea.raffles.winning-numbers.destroy",[d.raffle.id,o]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),g.success("Eliminado correctamente")},onError:l=>{g.error(l.message)}})}})}return(o,l)=>(e(),c(D,{title:"Ganadores"},{header:m(()=>[W,a("button",{type:"button",class:"simple-button",onClick:l[0]||(l[0]=t=>_.value=!0)}," Nuevo ")]),default:m(()=>[x.value.length==0?(e(),n("div",J," No hay resultados ")):(e(),n("div",K,[(e(!0),n(h,null,v(x.value,t=>(e(),c(R,{stat:t,key:t.title},{default:m(()=>[y(S,null,{default:m(()=>[a("div",Q,[y(T,{onClick:ie=>q(t.id),title:"Eliminar",icon:s(G)},null,8,["onClick","icon"])])]),_:2},1024)]),_:2},1032,["stat"]))),128))])),X,i.winners.length==0?(e(),n("div",Z," No hay transacciones ")):(e(),n("div",ee,[(e(!0),n(h,null,v(i.winners,t=>(e(),c(A,{transaction:t,key:t.id},null,8,["transaction"]))),128))])),y(j,{show:_.value,title:"Resultado",onOnCancel:b,onOnSubmit:C},{default:m(()=>[i.hours.length==0?(e(),n("div",te,' No se encontraron turnos disponibles para el dia en curso. Por favor, verifique la disponibilidad en "Horario" ')):(e(),c(N,{key:1,modelValue:s(r).hour,"onUpdate:modelValue":l[1]||(l[1]=t=>s(r).hour=t),text:"Turno",required:""},{default:m(()=>[re,(e(!0),n(h,null,v(i.hours,t=>(e(),n("option",{value:t},u(s(f).create().setTime(t).getTimeFormat()),9,se))),256))]),_:1},8,["modelValue"])),i.settings.date?(e(),c(k,{key:2,modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=t=>p.value=t),type:"date",text:"Fecha",required:""},null,8,["modelValue"])):(e(),c(k,{key:3,modelValue:s(r).number,"onUpdate:modelValue":l[3]||(l[3]=t=>s(r).number=t),type:"number",text:"Numero",required:""},null,8,["modelValue"])),ae,s(r).number&&s(r).hour?(e(),n("div",oe,[$(" Agregando el numero ganador: "),a("span",ne,u(s(r).number),1),$(" a la rifa "+u(i.raffle.name)+" para el turno de las "+u(s(f).create().setTime(s(r).hour).getTimeFormat())+" del corriente dia: "+u(s(f).create().format("d/m/Y"))+". ",1)])):I("",!0)]),_:1},8,["show"])]),_:1}))}};export{xe as default};
