import{_ as c}from"./InputForm-3569ba25.js";import{_ as y}from"./FormModal-f232a3f1.js";import{_ as k}from"./ClientareaLayout-1ac8dae0.js";import{c as V}from"./helpers-2a0e837a.js";import{t as n}from"./toast-0cf28ddb.js";import{T as q,l as x,o as s,j as b,e as f,b as o,t as S,c as g,F as B,k as N,a as u,u as l,O}from"./app-44bf99a2.js";import{_ as h}from"./BlockedNumber-574288c2.js";import"./IconUser-494f99b5.js";const D={class:"title"},$={key:0,class:"w-full text-center text-gray-400"},j={key:1,class:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4"},w={class:"grid grid-cols-2 gap-2"},C=o("p",{class:"text-primary"},[o("small",null," Nota: Recuerde ingresar el dígito con los ceros necesarios según la numeración de la rifa, por ejemplo, 01, 001, etc. De lo contrario, el bloqueo no se realizará correctamente. En cuanto a las fechas, utilice el formato dd/mm. ")],-1),T={__name:"BlockedNumber",props:{blockeds:{type:Object,required:!0},raffle:{type:Object,required:!0}},setup(a){const m=a,e=q({number:null,settings:{general_limit:null,individual_limit:null}}),d=x(!1),_=()=>{if(!e.settings.general_limit&&!e.settings.individual_limit){n.error("Debe ingresar al menos un limite");return}if(m.blockeds.find(i=>i.number==e.number)){n.error("Numero ya bloqueado");return}e.post(route("clientarea.raffles.blocked-numbers.store",m.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{p(),n.success("Agregado correctamente")}})},p=()=>{e.reset(),d.value=!1},v=i=>{V({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{O.delete(route("clientarea.raffles.blocked-numbers.destroy",[m.raffle.id,i]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{n.success("Eliminado correctamente")}})}})};return(i,r)=>(s(),b(k,{title:"Bloqueados"},{header:f(()=>[o("span",D,S(a.raffle.name)+": Bloqueados ",1),o("button",{type:"button",class:"simple-button",onClick:r[0]||(r[0]=t=>d.value=!0)}," Nuevo ")]),default:f(()=>[a.blockeds.length==0?(s(),g("div",$," No hay dígitos bloqueados 😥️ ")):(s(),g("div",j,[(s(!0),g(B,null,N(a.blockeds,t=>(s(),b(h,{digit:t,key:t.id,onDestroy:v},null,8,["digit"]))),128))])),u(y,{show:d.value,title:"Bloquear",onOnCancel:p,onOnSubmit:_},{default:f(()=>[u(c,{text:"Dígito",modelValue:l(e).number,"onUpdate:modelValue":r[1]||(r[1]=t=>l(e).number=t),type:"number",required:""},null,8,["modelValue"]),o("div",w,[u(c,{text:"Limite individual",modelValue:l(e).settings.individual_limit,"onUpdate:modelValue":r[2]||(r[2]=t=>l(e).settings.individual_limit=t),type:"number"},null,8,["modelValue"]),u(c,{text:"Limite general",modelValue:l(e).settings.general_limit,"onUpdate:modelValue":r[3]||(r[3]=t=>l(e).settings.general_limit=t),type:"number"},null,8,["modelValue"])]),C]),_:1},8,["show"])]),_:1}))}};export{T as default};
