import{_ as S,a as B}from"./DropdownItem-b8b13231.js";import{_ as k}from"./InputForm-52c583cb.js";import{_ as D}from"./SelectForm-02dd8122.js";import{_ as j}from"./FormModal-9719c708.js";import{_ as q}from"./ClientareaLayout-df0df333.js";import{c as A}from"./helpers-60f5c553.js";import{t as b}from"./toast-dfd9dffd.js";import{r as x,T as I,o as r,k as U,f as p,d as o,t as u,c as a,F as v,l as g,b as n,u as i,n as z,e as M,O as T}from"./app-30d6fc39.js";import{I as F}from"./IconEdit-eca06c0e.js";import{I as V}from"./IconTrash-c5666a20.js";import"./createVueComponent-6c4877ff.js";import"./Modal-0ee2e9b1.js";import"./IconUser-66c59b52.js";const L={class:"title"},G={key:0,class:"w-full text-center text-gray-400"},J={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4"},K={class:"bg-gray-100 p-4 rounded-xl text-gray-600"},P={class:"flex justify-between items-center mb-2"},Q={class:"px-1 py-1"},R=o("h2",{class:"font-semibold mb-2 text-sm"},"Sorteos",-1),W={class:"grid grid-cols-2 lg:grid-cols-3 gap-2"},X=o("option",{value:"",selected:""},"Seleccione un dia",-1),Y=["value"],Z={class:"grid grid-cols-2 gap-2"},ee={key:0,class:"text-sm text-primary mt-1"},te=o("div",{class:"mt-4 mb-2"}," Sorteos ",-1),oe={class:"grid grid-cols-2 lg:grid-cols-3 gap-2"},se={class:"border px-2 py-1 rounded-xl flex items-center justify-between"},re={role:"button"},ye={__name:"Availability",props:{availability:{type:Object,required:!0},raffle:{type:Object,required:!0}},setup(d){const f=d,_=x(!1),y=x(!0),c=x(null),t=I({id:null,day:null,start_time:"07:00:00",end_time:"21:00:00",raffle_id:f.raffle.id,blocked_hours:["11:00:00","15:00:00","21:00:00"]}),C=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],h=()=>{t.reset(),y.value=!0,_.value=!1,c.value=null},$=s=>{t.id=s.id,t.start_time=s.start_time,t.end_time=s.end_time,t.blocked_hours=s.blocked_hours,t.day=s.day,y.value=!1,_.value=!0},w=()=>{if(!c.value){b.error("Seleccione una hora");return}t.blocked_hours.push(c.value)},H=()=>{y.value?t.post(route("clientarea.raffles.availability.store",f.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h(),b.success("Guardado correctamente")}}):t.put(route("clientarea.raffles.availability.update",[f.raffle.id,t.id]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h(),b.success("Actualizado correctamente")}})},E=s=>{t.blocked_hours.splice(s,1)},N=s=>{A({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{T.delete(route("clientarea.raffles.availability.destroy",[f.raffle.id,s]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b.success("Eliminado correctamente")}})}})},O={1:"bg-cyan-500",11:"bg-cyan-500",2:"bg-pink-500",3:"bg-pink-500",12:"bg-pink-500",4:"bg-violet-900",10:"bg-violet-900",5:"bg-amber-500",6:"bg-amber-500"};return(s,l)=>(r(),U(q,{title:"Horario"},{header:p(()=>[o("span",L,u(d.raffle.name)+": Horario ",1),o("button",{type:"button",class:"primary-button",onClick:l[0]||(l[0]=e=>_.value=!0)}," Nuevo ")]),default:p(()=>[d.availability.length==0?(r(),a("div",G," No hay horario ")):(r(),a("div",J,[(r(!0),a(v,null,g(d.availability,e=>(r(),a("div",K,[o("div",P,[o("span",null,u(e.day)+": "+u(e.time_label),1),n(B,null,{default:p(()=>[o("div",Q,[n(S,{onClick:m=>$(e),title:"Editar",icon:i(F)},null,8,["onClick","icon"]),n(S,{onClick:m=>N(e.id),title:"Eliminar",icon:i(V)},null,8,["onClick","icon"])])]),_:2},1024)]),R,o("div",W,[(r(!0),a(v,null,g(e.blocked_hours_parsed,m=>(r(),a("div",{class:z(["text-sm text-white text-center rounded-xl py-1",O[d.raffle.id]??"bg-gray-500"])},u(m),3))),256))])]))),256))])),n(j,{show:_.value,title:"Horario",onOnCancel:h,onOnSubmit:H},{default:p(()=>[n(D,{modelValue:i(t).day,"onUpdate:modelValue":l[1]||(l[1]=e=>i(t).day=e),text:"Dia",name:"day"},{default:p(()=>[X,(r(),a(v,null,g(C,e=>o("option",{value:e},u(e),9,Y)),64))]),_:1},8,["modelValue"]),o("div",Z,[n(k,{text:"Hora incio",modelValue:i(t).start_time,"onUpdate:modelValue":l[2]||(l[2]=e=>i(t).start_time=e),type:"time",required:""},null,8,["modelValue"]),n(k,{text:"Hora fin",modelValue:i(t).end_time,"onUpdate:modelValue":l[3]||(l[3]=e=>i(t).end_time=e),type:"time",required:""},null,8,["modelValue"])]),n(k,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e),type:"time",text:"Sorteo"},null,8,["modelValue"]),o("button",{type:"button",class:"primary-button",onClick:w}," Agregar "),s.$page.props.errors.blocked_hours?(r(),a("p",ee,u(s.$page.props.errors.blocked_hours),1)):M("",!0),te,o("div",oe,[(r(!0),a(v,null,g(i(t).blocked_hours,(e,m)=>(r(),a("div",se,[o("span",null,u(e),1),o("span",re,[n(i(V),{size:"18",onClick:le=>E(m)},null,8,["onClick"])])]))),256))])]),_:1},8,["show"])]),_:1}))}};export{ye as default};
