import{T as N}from"./TableSection-559f2e1e.js";import{_ as O,C as f}from"./Carbon-a8b4faf3.js";import{_ as E}from"./AppLayout-8f705a52.js";import{_ as F}from"./AddButton-642dffe0.js";import{_ as C}from"./InputForm-af852081.js";import{_ as j}from"./FormModal-0cf9a455.js";import{r as T,T as B,o as s,e as h,f as u,b as e,t as l,d as _,n as x,c as n,h as g,F as p,a as c,u as i,j as D,O as I}from"./app-d3096396.js";import{t as v}from"./toast-9709185b.js";import{I as L,c as z}from"./helpers-1b336913.js";import{I as A}from"./IconEdit-592c19f4.js";import"./_plugin-vue_export-helper-c27b6911.js";const U={class:"title"},H={class:"flex gap-3 overflow-x-auto hide-scrollbar mb-4"},M=e("th",null,"Vendedor",-1),R=e("th",null,"Turno",-1),G=e("th",null,"Monto",-1),J=e("th",null,"Numero",-1),K={class:"text-xs text-gray-400 mb-1"},P={class:"mb-1"},Q={class:"text-gray-400"},W={class:"badge-blue whitespace-nowrap"},X={class:"font-semibold"},Y={key:0},Z=e("td",{colspan:"4",class:"text-center"},"No hay datos",-1),ee=[Z],te=e("th",null,"Numero",-1),se=e("th",null,"Limite individual",-1),oe=e("th",null,"Limite general",-1),le=e("th",null,"Acciones",-1),ne={class:"font-semibold"},ie={key:0,class:"badge-red"},ae={key:1},re={key:0,class:"badge-red"},ue={key:1},de=["onClick"],ce={key:0},me=e("td",{colspan:"4",class:"text-center"},"No hay datos",-1),_e=[me],be=e("th",null,"Dia",-1),fe=e("th",null,"Horario",-1),he=e("th",null,"Sorteos",-1),ve=e("th",null,"Acciones",-1),ge={class:"whitespace-nowrap"},pe={class:"badge-blue m-1 whitespace-nowrap"},ke=["onClick"],Ee={__name:"Show",props:{raffle:{type:Object,required:!0},transactions:{type:Object,required:!0},blockeds:{type:Object,required:!0},availability:{type:Object,required:!0}},setup(d){const b=d,$=[{name:"Inicio",route:route("clientarea.index")},{name:"Rifas",route:route("clientarea.raffles.index")},{name:b.raffle.name,route:route("clientarea.raffles.show",b.raffle.id)}],r=T(0),k=T(!1),a=B({number:null,settings:{general_limit:null,individual_limit:null}}),w=()=>{if(isNaN(a.number)){v.error("Numero invalido");return}if(!a.settings.general_limit&&!a.settings.individual_limit){v.error("Debe ingresar al menos un limite");return}if(b.blockeds.find(m=>m.number==a.number)){v.error("Numero ya bloqueado");return}a.post(route("clientarea.raffles.blocked-numbers.store",b.raffle.id),{onSuccess:()=>{V(),v.success("Numero bloqueado")}})},V=()=>{a.reset(),k.value=!1},S=m=>{console.log(m)},q=m=>{z({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{I.delete(route("clientarea.raffles.blocked-numbers.destroy",[b.raffle.id,m]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{v.success("Eliminado correctamente")},onError:o=>{console.log(o)}})}})};return(m,o)=>(s(),h(E,{title:"Rifa",breads:$},{header:u(()=>[e("span",U,l(d.raffle.name),1),r.value==1?(s(),h(F,{key:0,onClick:o[0]||(o[0]=t=>k.value=!0)})):_("",!0)]),default:u(()=>[e("div",H,[e("div",{class:x(r.value==0?"active-tab":"inactive-tab"),onClick:o[1]||(o[1]=t=>r.value=0),role:"button"}," Ventas ",2),e("div",{class:x(r.value==1?"active-tab":"inactive-tab"),onClick:o[2]||(o[2]=t=>r.value=1),role:"button"}," Bloqueados ",2),e("div",{class:x(r.value==2?"active-tab":"inactive-tab"),onClick:o[3]||(o[3]=t=>r.value=2),role:"button"}," Disponibilidad ",2)]),r.value==0?(s(),h(N,{key:0},{header:u(()=>[M,R,G,J]),body:u(()=>[(s(!0),n(p,null,g(d.transactions.data,t=>(s(),n("tr",null,[e("td",null,[e("div",K," #"+l(t.id)+" - "+l(i(f).create(t.created_at).diffForHumans()),1),e("div",P,l(t.user.name),1),e("div",Q,l(t.client),1)]),e("td",null,[e("span",W,l(i(f).create().setTime(t.hour).getTimeFormat()),1)]),e("td",null," C$"+l(t.amount),1),e("td",null,[e("span",X," #"+l(t.digit),1)])]))),256)),d.transactions.data.length==0?(s(),n("tr",Y,ee)):_("",!0)]),paginator:u(()=>[c(O,{links:d.transactions.links},null,8,["links"])]),_:1})):_("",!0),r.value==1?(s(),h(N,{key:1},{header:u(()=>[te,se,oe,le]),body:u(()=>[(s(!0),n(p,null,g(d.blockeds,t=>(s(),n("tr",null,[e("td",ne,l(t.number),1),e("td",null,[t.settings.individual_limit?(s(),n("span",ie," C$"+l(t.settings.individual_limit),1)):(s(),n("span",ae," Ninguno "))]),e("td",null,[t.settings.general_limit?(s(),n("span",re," C$"+l(t.settings.general_limit),1)):(s(),n("span",ue," Ninguno "))]),e("td",null,[e("span",{tooltip:"Eliminar",role:"button",onClick:y=>q(t.id)},[c(i(L),{size:"22"})],8,de)])]))),256)),d.blockeds.length==0?(s(),n("tr",ce,_e)):_("",!0)]),_:1})):_("",!0),r.value==2?(s(),h(N,{key:2},{header:u(()=>[be,fe,he,ve]),body:u(()=>[(s(!0),n(p,null,g(d.availability,t=>(s(),n("tr",null,[e("td",null,l(t.day),1),e("td",null,[e("span",ge,l(i(f).create().setTime(t.start_time).getTimeFormat())+" - ",1),D(" "+l(i(f).create().setTime(t.end_time).getTimeFormat()),1)]),e("td",null,[(s(!0),n(p,null,g(t.blocked_hours,y=>(s(),n("div",pe,l(i(f).create().setTime(y).getTimeFormat()),1))),256))]),e("td",null,[e("span",{tooltip:"Editar",role:"button",onClick:y=>S(t)},[c(i(A),{size:"22"})],8,ke)])]))),256))]),_:1})):_("",!0),c(j,{show:k.value,title:"Numero bloqueado",onOnCancel:V,onOnSubmit:w},{default:u(()=>[c(C,{text:"Numero",modelValue:i(a).number,"onUpdate:modelValue":o[4]||(o[4]=t=>i(a).number=t),type:"number",required:""},null,8,["modelValue"]),c(C,{text:"Limite individual",modelValue:i(a).settings.individual_limit,"onUpdate:modelValue":o[5]||(o[5]=t=>i(a).settings.individual_limit=t),type:"number"},null,8,["modelValue"]),c(C,{text:"Limite general",modelValue:i(a).settings.general_limit,"onUpdate:modelValue":o[6]||(o[6]=t=>i(a).settings.general_limit=t),type:"number"},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{Ee as default};
