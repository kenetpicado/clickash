import{_ as c}from"./InputForm-69a3ad5e.js";import{_ as y}from"./FormModal-ff07fe4a.js";import{T as k}from"./TableSection-56a9fd9b.js";import{c as v}from"./helpers-a5216626.js";import{t as u}from"./toast-633378cc.js";import{T as V,o as i,c as l,a as r,f as _,F as N,h as S,d as C,u as n,b as t,t as p,O as q}from"./app-5c7a9679.js";import{I as x}from"./IconTrash-a682585e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./createVueComponent-44e96f3b.js";const B=t("th",null,"Limite individual",-1),O=t("th",null,"Limite general",-1),E=t("th",null,"Numero",-1),L=t("th",null,"Acciones",-1),$={key:0},M={key:1},T={key:0},w={key:1},U={class:"badge-primary"},j=["onClick"],A={key:0},D=t("td",{colspan:"4",class:"text-center"},"No hay datos",-1),F=[D],I={class:"grid grid-cols-2 gap-2"},Y={__name:"BlockedNumber",props:{raffle:{type:Object,required:!0},blockeds:{type:Object,required:!0},openModal:{type:Boolean,required:!0}},emits:["update:openModal"],setup(a,{emit:f}){const m=a,o=V({number:null,settings:{general_limit:null,individual_limit:null}}),b=()=>{if(!o.settings.general_limit&&!o.settings.individual_limit){u.error("Debe ingresar al menos un limite");return}if(m.blockeds.find(d=>d.number==o.number)){u.error("Numero ya bloqueado");return}o.post(route("clientarea.raffles.blocked-numbers.store",m.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g(),u.success("Numero bloqueado")}})},g=()=>{o.reset(),f("update:openModal",!1)},h=d=>{v({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{q.delete(route("clientarea.raffles.blocked-numbers.destroy",[m.raffle.id,d]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{u.success("Eliminado correctamente")},onError:s=>{console.log(s)}})}})};return(d,s)=>(i(),l("div",null,[r(k,null,{header:_(()=>[B,O,E,L]),body:_(()=>[(i(!0),l(N,null,S(a.blockeds,e=>(i(),l("tr",null,[t("td",null,[e.settings.individual_limit?(i(),l("span",$," C$"+p(e.settings.individual_limit),1)):(i(),l("span",M," Ninguno "))]),t("td",null,[e.settings.general_limit?(i(),l("span",T," C$"+p(e.settings.general_limit),1)):(i(),l("span",w," Ninguno "))]),t("td",null,[t("span",U,p(e.number),1)]),t("td",null,[t("span",{tooltip:"Eliminar",role:"button",onClick:z=>h(e.id)},[r(n(x),{size:"22"})],8,j)])]))),256)),a.blockeds.length==0?(i(),l("tr",A,F)):C("",!0)]),_:1}),r(y,{show:a.openModal,title:"Bloquear",onOnCancel:g,onOnSubmit:b},{default:_(()=>[r(c,{text:"Numero",modelValue:n(o).number,"onUpdate:modelValue":s[0]||(s[0]=e=>n(o).number=e),type:"number",required:""},null,8,["modelValue"]),t("div",I,[r(c,{text:"Limite individual",modelValue:n(o).settings.individual_limit,"onUpdate:modelValue":s[1]||(s[1]=e=>n(o).settings.individual_limit=e),type:"number"},null,8,["modelValue"]),r(c,{text:"Limite general",modelValue:n(o).settings.general_limit,"onUpdate:modelValue":s[2]||(s[2]=e=>n(o).settings.general_limit=e),type:"number"},null,8,["modelValue"])])]),_:1},8,["show"])]))}};export{Y as default};
