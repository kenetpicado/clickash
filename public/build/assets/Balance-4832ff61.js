import{_ as I,a as k}from"./DropdownItem-b11691be.js";import{_ as b}from"./InputForm-3bc6c0ab.js";import{_ as w}from"./SelectForm-d84708ec.js";import{_ as B}from"./FormModal-6a4b089d.js";import{_ as T}from"./StatCard-8ecc39c5.js";import{_ as R}from"./ClientareaLayout-2116b1de.js";import{C as y}from"./Carbon-e7b34390.js";import{c as j}from"./helpers-7982b481.js";import{t as h}from"./toast-cc00752a.js";import{m as q,r as D,T as L,e as M,l as P,o as r,k as x,g as c,b as t,t as d,a as i,c as u,u as l,f as S,F as C,O}from"./app-ee729e55.js";import{I as f}from"./IconCurrencyDollar-35805dfe.js";import{I as A}from"./IconTrash-ecaeaa92.js";import"./IconList-6f12e28f.js";import"./createVueComponent-c1c78ef7.js";import"./IconSettings-d5063921.js";import"./_plugin-vue_export-helper-c27b6911.js";const N={class:"title"},U={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},F={key:0,class:"mb-4"},Y={key:1,class:"mb-4"},H={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8"},z={class:"flex items-center justify-between mb-4 text-gray-600"},G=t("span",{class:"title"}," Movimientos ",-1),J={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},K={class:"bg-card p-3 rounded-xl"},Q={class:"flex items-center justify-between"},W={class:"text-gray-400 text-sm mb-2"},X={class:"flex items-center justify-between"},Z={class:"text-sm text-gray-600 font-bold"},ee={class:"text-xl text-gray-600 font-bold"},te=t("option",{value:"RETIRO"},"RETIRO",-1),ae=t("option",{value:"DEPOSITO"},"DEPOSITO",-1),he={__name:"Balance",props:{balance:{type:Object,required:!0},seller:{type:Object,required:!0},archings:{type:Object,required:!0}},setup(p){const o=p,a=q({date:""}),_=D(!1),n=L({id:null,type:"RETIRO",amount:null}),g=new URLSearchParams(window.location.search);g.get("date")&&(a.date=g.get("date")),M(()=>[a.date],([m])=>{m||delete a.date,O.get(route("clientarea.sellers.balance",o.seller.id),a,{preserveState:!0,preserveScroll:!0,only:["balance","archings"]})});const $=P(()=>[{title:"Ingresos",value:"C$"+o.balance.income.toLocaleString(),icon:f},{title:"Egresos",value:"C$"+o.balance.expenditure.toLocaleString(),icon:f},{title:"Balance",value:"C$"+(o.balance.income-o.balance.expenditure).toLocaleString(),icon:f}]);function v(){n.reset(),_.value=!1}function V(){n.post(route("clientarea.sellers.archings.store",o.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{v(),h.success("Movimiento agregado")}})}function E(m){j({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{O.delete(route("clientarea.sellers.archings.destroy",[o.seller.id,m]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h.success("Eliminado correctamente")}})}})}return(m,s)=>(r(),x(R,{title:"Balance"},{header:c(()=>[t("span",N," Balance: "+d(p.seller.name),1)]),default:c(()=>[t("div",U,[i(b,{modelValue:a.date,"onUpdate:modelValue":s[0]||(s[0]=e=>a.date=e),text:"Fecha",type:"date"},null,8,["modelValue"])]),a.date?(r(),u("h2",Y,"Balance del DIA "+d(l(y).create(a.date).format("d/m/Y")),1)):(r(),u("h2",F,"Balance de la SEMANA en curso")),t("div",H,[(r(!0),u(C,null,S($.value,e=>(r(),x(T,{stat:e,key:e.title},null,8,["stat"]))),128))]),t("div",z,[G,t("button",{onClick:s[1]||(s[1]=e=>_.value=!0),type:"button",class:"simple-button"}," Nuevo ")]),t("div",J,[(r(!0),u(C,null,S(p.archings.data,e=>(r(),u("div",K,[t("div",Q,[t("div",W,d(l(y).create(e.created_at).format("d/m/Y H:i")),1),i(I,null,{default:c(()=>[i(k,{onClick:se=>E(e.id),title:"Eliminar",icon:l(A)},null,8,["onClick","icon"])]),_:2},1024)]),t("div",X,[t("span",Z,d(e.type),1),t("span",ee," C$"+d(e.amount),1)])]))),256))]),i(B,{show:_.value,title:"Movimiento",onOnCancel:v,onOnSubmit:V},{default:c(()=>[i(w,{modelValue:l(n).type,"onUpdate:modelValue":s[2]||(s[2]=e=>l(n).type=e),text:"Tipo",required:""},{default:c(()=>[te,ae]),_:1},8,["modelValue"]),i(b,{modelValue:l(n).amount,"onUpdate:modelValue":s[3]||(s[3]=e=>l(n).amount=e),type:"number",text:"Cantidad",required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{he as default};
