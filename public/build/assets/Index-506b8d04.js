import{_ as O}from"./BlockedNumber-f1a50611.js";import{_}from"./InputForm-1dcc9470.js";import{_ as B}from"./SelectForm-85b12e3c.js";import{_ as j}from"./FormModal-f4f51b20.js";import{_ as N}from"./ClientareaLayout-23adfb0d.js";import{c as $}from"./helpers-02269427.js";import{t as b}from"./toast-cb79e898.js";import{T as C,l as E,g as U,h as D,o as s,j as V,e as m,b as a,t as y,c as i,d as L,a as u,k as v,F as c,u as d,O as h}from"./app-367e23c6.js";import"./IconUser-a5007c8f.js";const P={class:"title"},R={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},A=a("option",{value:"",selected:""},"Seleccione una rifa",-1),F=["value"],z={key:0,class:"w-full text-center text-gray-400"},I={class:"text-xl font-bold mb-2 text-gray-600"},M={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4 w-full"},T={class:"grid grid-cols-2 gap-2"},G=a("p",{class:"text-primary"},[a("small",null," Nota: Recuerde ingresar el dígito con los ceros necesarios según la numeración de la rifa, por ejemplo, 01, 001, etc. De lo contrario, el bloqueo no se realizará correctamente. En cuanto a las fechas, utilice el formato dd/mm. ")],-1),te={__name:"Index",props:{blockeds:{type:Object,required:!0},seller:{type:Object,required:!0},raffles:{type:Object,required:!0}},setup(n){const f=n,l=C({number:null,raffle_id:null,settings:{general_limit:null,individual_limit:null}}),g=E(!1),S=new URLSearchParams(window.location.search),o=U({raffle_id:S.get("raffle_id")||null}),q=()=>{l.raffle_id=o.raffle_id,l.post(route("clientarea.sellers.blocked-numbers.store",f.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{k(),b.success("Agregado correctamente")},onError:r=>{b.error(r.message)}})},k=()=>{l.reset(),g.value=!1};D(()=>o,()=>{let r={...o};for(const t in r)r[t]||delete r[t];h.get(route("clientarea.sellers.blocked-numbers.index",f.seller.id),r,{preserveState:!0,only:["blockeds"],replace:!0})},{deep:!0});const w=r=>{$({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{h.delete(route("clientarea.sellers.blocked-numbers.destroy",[f.seller.id,r]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b.success("Eliminado correctamente")}})}})};return(r,t)=>(s(),V(N,{title:"Bloqueados"},{header:m(()=>[a("span",P,y(n.seller.name)+": Bloqueados ",1),o.raffle_id?(s(),i("button",{key:0,type:"button",class:"simple-button",onClick:t[0]||(t[0]=p=>g.value=!0)}," Nuevo ")):L("",!0)]),default:m(()=>{var p;return[a("div",R,[u(B,{modelValue:o.raffle_id,"onUpdate:modelValue":t[1]||(t[1]=e=>o.raffle_id=e),text:"Rifa",required:""},{default:m(()=>[A,(s(!0),i(c,null,v(n.raffles,e=>(s(),i("option",{value:e.id},y(e.name),9,F))),256))]),_:1},8,["modelValue"])]),n.blockeds.length==0?(s(),i("div",z," No hay dígitos bloqueados 😥️ ")):(s(!0),i(c,{key:1},v(Object.groupBy(n.blockeds,({raffle:e})=>e.name),e=>(s(),i(c,null,[a("h2",I,y(e[0].raffle.name),1),a("div",M,[(s(!0),i(c,null,v(e,x=>(s(),V(O,{digit:x,key:x.id,onDestroy:w},null,8,["digit"]))),128))])],64))),256)),u(j,{show:g.value,title:(p=n.raffles.find(e=>o.raffle_id==e.id))==null?void 0:p.name,onOnCancel:k,onOnSubmit:q},{default:m(()=>[u(_,{text:"Dígito",modelValue:d(l).number,"onUpdate:modelValue":t[2]||(t[2]=e=>d(l).number=e),type:"number",required:""},null,8,["modelValue"]),a("div",T,[u(_,{text:"Limite individual",modelValue:d(l).settings.individual_limit,"onUpdate:modelValue":t[3]||(t[3]=e=>d(l).settings.individual_limit=e),type:"number"},null,8,["modelValue"]),u(_,{text:"Limite general",modelValue:d(l).settings.general_limit,"onUpdate:modelValue":t[4]||(t[4]=e=>d(l).settings.general_limit=e),type:"number"},null,8,["modelValue"])]),G]),_:1},8,["show","title"])]}),_:1}))}};export{te as default};
