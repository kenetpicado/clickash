import{T as y}from"./TableSection-84137b40.js";import{T,j as V,o,c as s,b as e,F as _,h as p,a as i,f as c,t as r,u as n,d as S}from"./app-e6f78d54.js";import{_ as k}from"./FormModal-d5549557.js";import{_ as C}from"./InputForm-1c7c7af7.js";import{_ as N}from"./SelectForm-be18b7a9.js";import{C as m}from"./Carbon-e7b34390.js";import{t as g}from"./toast-4f7b2110.js";import{c as q}from"./helpers-6ddcfa34.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},j={class:"bg-white p-8 rounded-xl items-center flex justify-center border-2"},F={class:"text-center"},O={class:"text-2xl font-bold mb-2 badge-blue"},H={class:"text-center text-sm"},w=e("th",null,"Vendedor",-1),M=e("th",null,"Cliente",-1),$=e("th",null,"Turno",-1),E=e("th",null,"Numero",-1),L=e("th",null,"Premio",-1),P={class:"text-xs text-gray-400 mb-1"},U={class:"mb-1"},z={class:"badge-blue whitespace-nowrap"},A={class:"font-semibold"},D={class:"badge-red text-sm"},G={key:0},R=e("td",{colspan:"5",class:"text-center"},"No hay datos",-1),W=[R],Y={class:"grid grid-cols-2 gap-2"},I=e("option",{value:"",disabled:"",selected:""},"Seleccione un turno",-1),J=["value"],K={key:0,class:"text-red-500 mb-4"},Q={key:1,class:"text-gray-400"},le={__name:"WinningNumber",props:{results:{type:Object,required:!0},raffle:{type:Object,required:!0},openModal:{type:Boolean,required:!0},currentBlockedHours:{type:Object,required:!0},winners:{type:Object,required:!0}},emits:["update:openModal"],setup(l,{emit:x}){const u=l,a=T({number:null,hour:null}),h=V(()=>u.currentBlockedHours.length==0?[]:u.currentBlockedHours[0].blocked_hours),f=()=>{a.reset(),x("update:openModal",!1)},v=()=>{if(u.results.find(b=>b.hour==a.hour)){g.error("Ya existe un resultado para este turno");return}q({title:"Confirmar",message:"Â¿Esta seguro de agregar este resultado?",onConfirm:()=>{a.post(route("clientarea.raffles.winning-numbers.store",u.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{f(),g.success("Guardado correctamente")}})}})};return(b,d)=>(o(),s("div",null,[e("div",B,[(o(!0),s(_,null,p(l.results,t=>(o(),s("div",j,[e("div",F,[e("div",O,r(t.number),1),e("div",H,r(n(m).create().setTime(t.hour).getTimeFormat()),1)])]))),256))]),i(y,null,{header:c(()=>[w,M,$,E,L]),body:c(()=>[(o(!0),s(_,null,p(l.winners,t=>(o(),s("tr",null,[e("td",null,[e("div",P," #"+r(t.id)+" - "+r(n(m).create(t.created_at).diffForHumans()),1),e("div",U,r(t.user.name),1)]),e("td",null,r(t.client),1),e("td",null,[e("span",z,r(n(m).create().setTime(t.hour).getTimeFormat()),1)]),e("td",null,[e("span",A,r(t.digit),1)]),e("td",null,[e("span",D," C$"+r(t.prize.toLocaleString()),1)])]))),256)),l.winners.length==0?(o(),s("tr",G,W)):S("",!0)]),_:1}),i(k,{show:l.openModal,title:"Resultado",onOnCancel:f,onOnSubmit:v},{default:c(()=>[e("div",Y,[i(N,{modelValue:n(a).hour,"onUpdate:modelValue":d[0]||(d[0]=t=>n(a).hour=t),text:"Turno",required:""},{default:c(()=>[I,(o(!0),s(_,null,p(h.value,t=>(o(),s("option",{value:t},r(n(m).create().setTime(t).getTimeFormat()),9,J))),256))]),_:1},8,["modelValue"]),i(C,{modelValue:n(a).number,"onUpdate:modelValue":d[1]||(d[1]=t=>n(a).number=t),type:"number",text:"Numero"},null,8,["modelValue"])]),h.value.length==0?(o(),s("p",K,' No se encontraron turnos disponibles para el dia en curso. Por favor, verifique la disponibilidad en "Horario" ')):(o(),s("p",Q," Solo puede agregar resultados del dia de hoy y 1 por turno. "))]),_:1},8,["show"])]))}};export{le as default};
