import{_ as $,a as j}from"./Error-7f114a08.js";import{_ as b}from"./InputForm-52c583cb.js";import{_ as C}from"./SelectForm-02dd8122.js";import{_ as N}from"./FormModal-9719c708.js";import{_ as U}from"./ClientareaLayout-df0df333.js";import{c as E}from"./helpers-60f5c553.js";import{t as x}from"./toast-dfd9dffd.js";import{T as L,r as S,h as D,j as P,o as s,k as h,f as c,d,t as v,c as o,e as A,b as n,l as y,F as f,u,O as q}from"./app-30d6fc39.js";import"./IconTrash-c5666a20.js";import"./createVueComponent-6c4877ff.js";import"./Modal-0ee2e9b1.js";import"./DropdownItem-b8b13231.js";import"./IconUser-66c59b52.js";const F={class:"title"},R={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},I=d("option",{value:"",selected:""},"Seleccione una rifa",-1),M=["value"],T={key:0,class:"w-full text-center text-gray-400"},z={class:"text-xl font-bold mb-2 text-gray-600"},G={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4 w-full"},H={class:"grid grid-cols-2 gap-2"},oe={__name:"Index",props:{blockeds:{type:Object,required:!0},seller:{type:Object,required:!0},raffles:{type:Object,required:!0}},setup(i){const g=i,l=L({number:null,raffle_id:null,settings:{general_limit:null,individual_limit:null}}),p=S(!1),m=S(null),w=new URLSearchParams(window.location.search),a=D({raffle_id:w.get("raffle_id")||null}),O=()=>{m.value=null,l.raffle_id=a.raffle_id,l.post(route("clientarea.sellers.blocked-numbers.store",g.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{k(),x.success("Agregado correctamente")},onError:r=>{m.value=r.message}})},k=()=>{l.reset(),m.value=null,p.value=!1};P(()=>a,()=>{let r={...a};for(const t in r)r[t]||delete r[t];q.get(route("clientarea.sellers.blocked-numbers.index",g.seller.id),r,{preserveState:!0,only:["blockeds"],replace:!0})},{deep:!0});const B=r=>{E({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{q.delete(route("clientarea.sellers.blocked-numbers.destroy",[g.seller.id,r]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{x.success("Eliminado correctamente")}})}})};return(r,t)=>(s(),h(U,{title:"Bloqueados"},{header:c(()=>[d("span",F,v(i.seller.name)+": Bloqueados ",1),a.raffle_id?(s(),o("button",{key:0,type:"button",class:"primary-button",onClick:t[0]||(t[0]=_=>p.value=!0)}," Nuevo ")):A("",!0)]),default:c(()=>{var _;return[d("div",R,[n(C,{modelValue:a.raffle_id,"onUpdate:modelValue":t[1]||(t[1]=e=>a.raffle_id=e),text:"Rifa",required:""},{default:c(()=>[I,(s(!0),o(f,null,y(i.raffles,e=>(s(),o("option",{value:e.id},v(e.name),9,M))),256))]),_:1},8,["modelValue"])]),i.blockeds.length==0?(s(),o("div",T," No hay dígitos bloqueados 😥️ ")):(s(!0),o(f,{key:1},y(Object.groupBy(i.blockeds,({raffle:e})=>e.name),e=>(s(),o(f,null,[d("h2",z,v(e[0].raffle.name),1),d("div",G,[(s(!0),o(f,null,y(e,V=>(s(),h($,{digit:V,key:V.id,onDestroy:B},null,8,["digit"]))),128))])],64))),256)),n(N,{show:p.value,title:(_=i.raffles.find(e=>a.raffle_id==e.id))==null?void 0:_.name,onOnCancel:k,onOnSubmit:O},{default:c(()=>[n(b,{text:"Dígito",modelValue:u(l).number,"onUpdate:modelValue":t[2]||(t[2]=e=>u(l).number=e),required:""},null,8,["modelValue"]),d("div",H,[n(b,{text:"Limite individual",modelValue:u(l).settings.individual_limit,"onUpdate:modelValue":t[3]||(t[3]=e=>u(l).settings.individual_limit=e),type:"number"},null,8,["modelValue"]),n(b,{text:"Limite general",modelValue:u(l).settings.general_limit,"onUpdate:modelValue":t[4]||(t[4]=e=>u(l).settings.general_limit=e),type:"number"},null,8,["modelValue"])]),n(j,{message:m.value},null,8,["message"])]),_:1},8,["show","title"])]}),_:1}))}};export{oe as default};
