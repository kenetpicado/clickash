import{_ as T,a as E}from"./DropdownItem-fe72587c.js";import{_ as x}from"./InputForm-09ce25d2.js";import{_ as N}from"./SelectForm-c08a8816.js";import{_ as F}from"./FormModal-a982c3eb.js";import{o as r,c as u,b as n,t as d,d as S,p as I,l as y,T as j,m as O,h as B,j as f,e as c,F as k,k as V,a as h,u as a,f as $}from"./app-22b39ffb.js";import{_ as D}from"./ClientareaLayout-fdd48f5d.js";import{C as p}from"./Carbon-d935ed77.js";import{I as A,c as C}from"./helpers-5e55b43f.js";import{t as m}from"./toast-a49e6fbc.js";import{c as G}from"./IconUser-bcc2a636.js";import"./IconList-9029bf55.js";import"./use-resolve-button-type-13c16658.js";var U=G("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);const L={class:"bg-card rounded-xl"},M={class:"flex h-full items-center justify-between p-4"},Y={class:"text-gray-600"},H={class:"font-bold text-lg"},P={class:"text-sm"},R={key:0,class:"text-sm"},W={__name:"StatCardActions",props:{stat:{type:Object,required:!0}},setup(l){return(o,g)=>(r(),u("div",L,[n("div",M,[n("div",Y,[n("div",H,d(l.stat.value),1),n("div",P,d(l.stat.title),1),l.stat.date?(r(),u("div",R,d(l.stat.date),1)):S("",!0)]),n("div",null,[I(o.$slots,"default")])])]))}},z=n("span",{class:"title"}," Ganadores ",-1),J={key:0,class:"w-full text-center text-gray-400 mb-4"},K={key:1,class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},Q={class:"px-1 py-1"},X={key:0,class:"text-red-500 mb-4"},Z=n("option",{value:"",disabled:"",selected:""},"Seleccione un turno",-1),ee=["value"],te=n("div",{class:"text-gray-400 text-sm"}," Verifique que los datos ingresados sean correctos antes de guardar. ",-1),re={key:4,class:"mt-5 text-basic"},se={class:"font-bold"},be={__name:"WinningNumber",props:{winning_numbers:{type:Object,required:!0},raffle:{type:Object,required:!0}},setup(l){const o=l,g=y(!1),_=y(""),e=j({number:null,hour:null}),v=O(()=>o.winning_numbers.map(t=>({id:t.id,title:"Turno: "+t.hour,value:"Dígito: "+t.number,date:"Fecha: "+t.date,icon:U})));function b(){e.reset(),g.value=!1}B(()=>_.value,t=>{t?e.number=p.create(t).format("d/m"):e.number=null});const w=()=>{if(o.winning_numbers.find(t=>t.hour==e.hour)){m.error("Ya existe un resultado para este turno");return}if(o.raffle.settings.max){if(e.number.length>o.raffle.settings.max.length){m.error("Los números solo pueden contener "+o.raffle.settings.max.length+" digitos");return}if(parseInt(e.number)>parseInt(o.raffle.settings.max)){m.error("El número ingresado supera el máximo permitido: "+o.raffle.settings.max);return}}C({title:"Confirmar",message:"¿Esta seguro de agregar este resultado?",onConfirm:()=>{e.post(route("clientarea.raffles.winning-numbers.store",o.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),m.success("Guardado correctamente")},onError:t=>{m.error(t.message)}})}})};function q(t){C({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{e.delete(route("clientarea.raffles.winning-numbers.destroy",[o.raffle.id,t]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),m.success("Eliminado correctamente")},onError:i=>{m.error(i.message)}})}})}return(t,i)=>(r(),f(D,{title:"Ganadores"},{header:c(()=>[z,n("button",{type:"button",class:"simple-button",onClick:i[0]||(i[0]=s=>g.value=!0)}," Nuevo ")]),default:c(()=>[v.value.length==0?(r(),u("div",J," No hay resultados ")):(r(),u("div",K,[(r(!0),u(k,null,V(v.value,s=>(r(),f(W,{stat:s,key:s.title},{default:c(()=>[h(E,null,{default:c(()=>[n("div",Q,[h(T,{onClick:ae=>q(s.id),title:"Eliminar",icon:a(A)},null,8,["onClick","icon"])])]),_:2},1024)]),_:2},1032,["stat"]))),128))])),h(F,{show:g.value,title:"Resultado",onOnCancel:b,onOnSubmit:w},{default:c(()=>[l.raffle.blocked_hours.length==0?(r(),u("div",X,' No se encontraron turnos disponibles para el dia en curso. Por favor, verifique la disponibilidad en "Horario" ')):(r(),f(N,{key:1,modelValue:a(e).hour,"onUpdate:modelValue":i[1]||(i[1]=s=>a(e).hour=s),text:"Turno",required:""},{default:c(()=>[Z,(r(!0),u(k,null,V(l.raffle.blocked_hours,s=>(r(),u("option",{value:s},d(a(p).create().setTime(s).getTimeFormat()),9,ee))),256))]),_:1},8,["modelValue"])),l.raffle.settings.date?(r(),f(x,{key:2,modelValue:_.value,"onUpdate:modelValue":i[2]||(i[2]=s=>_.value=s),type:"date",text:"Fecha",required:""},null,8,["modelValue"])):(r(),f(x,{key:3,modelValue:a(e).number,"onUpdate:modelValue":i[3]||(i[3]=s=>a(e).number=s),type:"number",text:"Dígito",required:""},null,8,["modelValue"])),te,a(e).number&&a(e).hour?(r(),u("div",re,[$(" Agregando el numero ganador: "),n("span",se,d(a(e).number),1),$(" a la rifa "+d(l.raffle.name)+" para el turno de las "+d(a(p).create().setTime(a(e).hour).getTimeFormat())+" del corriente dia: "+d(a(p).create().format("d/m/Y"))+". ",1)])):S("",!0)]),_:1},8,["show"])]),_:1}))}};export{be as default};
