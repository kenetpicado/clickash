import{_ as S,a as O}from"./DropdownItem-165370fe.js";import{_ as k}from"./InputForm-1dcc9470.js";import{_ as j}from"./SelectForm-85b12e3c.js";import{_ as D}from"./FormModal-f4f51b20.js";import{_ as q}from"./ClientareaLayout-23adfb0d.js";import{I as V,c as A}from"./helpers-02269427.js";import{t as f}from"./toast-cb79e898.js";import{l as x,T as I,o as r,j as U,e as m,b as s,c as a,F as b,k as v,t as d,a as n,u as i,n as z,d as M,O as T}from"./app-367e23c6.js";import{I as F}from"./IconEdit-675eabb0.js";import"./IconList-5cdd8054.js";import"./IconUser-a5007c8f.js";import"./use-resolve-button-type-cdfe0f5b.js";const L=s("span",{class:"title"}," Horario ",-1),G={key:0,class:"w-full text-center text-gray-400"},J={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4"},K={class:"bg-card p-4 rounded-xl text-gray-600"},P={class:"flex justify-between items-center mb-2"},Q={class:"px-1 py-1"},R=s("h2",{class:"font-semibold mb-2 text-sm"},"Sorteos",-1),W={class:"grid grid-cols-3 lg:grid-cols-4 gap-2"},X=s("option",{value:"",selected:""},"Seleccione un dia",-1),Y=["value"],Z={class:"grid grid-cols-2 gap-2"},ee={key:0,class:"text-sm text-primary mt-1"},te=s("div",{class:"mt-4 mb-2"}," Sorteos ",-1),oe={class:"grid grid-cols-2 lg:grid-cols-3 gap-2"},se={class:"border px-2 py-1 rounded-xl flex items-center justify-between"},re={role:"button"},ge={__name:"Availability",props:{availability:{type:Object,required:!0},raffle:{type:Object,required:!0}},setup(g){const p=g,_=x(!1),y=x(!0),c=x(null),t=I({id:null,day:null,start_time:"07:00:00",end_time:"21:00:00",raffle_id:p.raffle.id,blocked_hours:["11:00:00","15:00:00","21:00:00"]}),C=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],h=()=>{t.reset(),y.value=!0,_.value=!1,c.value=null},$=o=>{t.id=o.id,t.start_time=o.start_time,t.end_time=o.end_time,t.blocked_hours=o.blocked_hours,t.day=o.day,y.value=!1,_.value=!0},w=()=>{if(!c.value){f.error("Seleccione una hora");return}t.blocked_hours.push(c.value)},H=()=>{y.value?t.post(route("clientarea.raffles.availability.store",p.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h(),f.success("Guardado correctamente")}}):t.put(route("clientarea.raffles.availability.update",[p.raffle.id,t.id]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h(),f.success("Actualizado correctamente")}})},B=o=>{t.blocked_hours.splice(o,1)},E=o=>{A({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{T.delete(route("clientarea.raffles.availability.destroy",[p.raffle.id,o]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{f.success("Eliminado correctamente")}})}})};function N(o){return o.includes("11:")?"bg-cyan-600":o.includes("9:")?"bg-indigo-600":o.includes("6:")?"bg-emerald-600":o.includes("3:")?"bg-amber-600":"bg-rose-600"}return(o,l)=>(r(),U(q,{title:"Horario"},{header:m(()=>[L,s("button",{type:"button",class:"simple-button",onClick:l[0]||(l[0]=e=>_.value=!0)}," Nuevo ")]),default:m(()=>[g.availability.length==0?(r(),a("div",G," No hay horario ")):(r(),a("div",J,[(r(!0),a(b,null,v(g.availability,e=>(r(),a("div",K,[s("div",P,[s("span",null,d(e.day)+": "+d(e.time_label),1),n(O,null,{default:m(()=>[s("div",Q,[n(S,{onClick:u=>$(e),title:"Editar",icon:i(F)},null,8,["onClick","icon"]),n(S,{onClick:u=>E(e.id),title:"Eliminar",icon:i(V)},null,8,["onClick","icon"])])]),_:2},1024)]),R,s("div",W,[(r(!0),a(b,null,v(e.blocked_hours_parsed,u=>(r(),a("div",{class:z(["text-sm text-white text-center rounded-xl py-1",N(u)])},d(u),3))),256))])]))),256))])),n(D,{show:_.value,title:"Horario",onOnCancel:h,onOnSubmit:H},{default:m(()=>[n(j,{modelValue:i(t).day,"onUpdate:modelValue":l[1]||(l[1]=e=>i(t).day=e),text:"Dia",name:"day"},{default:m(()=>[X,(r(),a(b,null,v(C,e=>s("option",{value:e},d(e),9,Y)),64))]),_:1},8,["modelValue"]),s("div",Z,[n(k,{text:"Hora incio",modelValue:i(t).start_time,"onUpdate:modelValue":l[2]||(l[2]=e=>i(t).start_time=e),type:"time",required:""},null,8,["modelValue"]),n(k,{text:"Hora fin",modelValue:i(t).end_time,"onUpdate:modelValue":l[3]||(l[3]=e=>i(t).end_time=e),type:"time",required:""},null,8,["modelValue"])]),n(k,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e),type:"time",text:"Sorteo"},null,8,["modelValue"]),s("button",{type:"button",class:"primary-button",onClick:w}," Agregar "),o.$page.props.errors.blocked_hours?(r(),a("p",ee,d(o.$page.props.errors.blocked_hours),1)):M("",!0),te,s("div",oe,[(r(!0),a(b,null,v(i(t).blocked_hours,(e,u)=>(r(),a("div",se,[s("span",null,d(e),1),s("span",re,[n(i(V),{size:"18",onClick:le=>B(u)},null,8,["onClick"])])]))),256))])]),_:1},8,["show"])]),_:1}))}};export{ge as default};
