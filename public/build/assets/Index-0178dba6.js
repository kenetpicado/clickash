import{t as i}from"./toast-075e93c3.js";import{c as A}from"./helpers-564927d4.js";import{r as b,h as F,v as h,j as U,o as _,c as v,d as a,F as $,l as L,t as q,b as r,f as y,u as o,e as S,k as O}from"./app-60cbfc26.js";import{_ as z}from"./FormModal-d7bcb5ee.js";import{_ as w}from"./InputForm-5d973b00.js";import{_ as g,a as D}from"./DropdownItem-1e7b7c45.js";import{I as R,a as T,b as E}from"./IconReportAnalytics-79c5ec38.js";import{c as G}from"./createVueComponent-d6994ea6.js";import{I as H}from"./IconEdit-7bdafa27.js";import{I as J}from"./IconTrash-5d3cbf11.js";import{_ as K}from"./ClientareaLayout-304baa44.js";import"./Modal-1812b55d.js";import"./IconUser-0f1bb506.js";var P=G("box","IconBox",[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}]]);function Q(){const p=b([]),d={id:"",name:"",email:" ",password:"",password_confirmation:""},n=F({...d});async function c(){h.get(route("api.sellers.index")).then(e=>{p.value=e.data.data}).catch(e=>{i.error(f(e))})}function l(e=null){if(n.password!==n.password_confirmation){i.error("Las contraseñas no coinciden");return}h.post(route("api.sellers.store"),n).then(()=>{c(),i.success("Guardado correctamente"),e&&e()}).catch(s=>{i.error(f(s))})}function V(e=null){h.put(route("api.sellers.update",n.id),n).then(()=>{c(),i.success("Actualizado correctamente"),e&&e()}).catch(s=>{i.error(f(s))})}function k(e){h.put(route("api.toggle-status",e)).then(()=>{c(),i.success("Actualizado correctamente")}).catch(s=>{i.error(f(s))})}function C(e){A({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{h.delete(route("api.sellers.destroy",e)).then(()=>{p.value=p.value.filter(s=>s.id!==e),i.success("Eliminado correctamente")}).catch(s=>{i.error(f(s))})}})}function f(e){var s,x;return((x=(s=e.response)==null?void 0:s.data)==null?void 0:x.message)??e.message}function I(){Object.assign(n,d)}return{form:n,store:l,update:V,destroy:C,toggleStatus:k,sellers:p,getSellers:c,resetForm:I}}const W={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},X={class:"bg-gray-100 rounded-lg p-2 w-full"},Y={class:"flex gap-2 w-full"},Z=a("div",{class:"rounded-lg w-1/3 px-1"},[a("img",{src:"/images/inbox-pana.svg",alt:"",class:"w-20 h-20 object-contain rounded-lg"})],-1),ee={class:"text-xs w-full h-full"},te={class:"flex justify-between w-full"},se={class:""},oe={class:"px-1 py-1"},ae={class:"px-1 py-1"},le={class:"flex flex-col mb-1"},re={class:"flex items-center gap-1 mb-1"},ne={class:"text-base"},ie={key:0,class:"text-xs text-gray-500"},ce={class:"text-gray-500"},ue={__name:"SellerTab",props:{triggerNew:{type:Boolean,required:!0}},setup(p){const d=p,{store:n,update:c,form:l,toggleStatus:V,destroy:k,sellers:C,getSellers:f,resetForm:I}=Q(),e=b(!1),s=b(!0),x=()=>{s.value?n(N):c(N)},N=()=>{I(),s.value=!0,e.value=!1},M=u=>{l.id=u.id,l.name=u.name,l.email=u.email,s.value=!1,e.value=!0};U(()=>d.triggerNew,u=>{s.value=!0,e.value=!0});const j={enabled:"Bloquear",disabled:"Desbloquear"};return f(),(u,m)=>(_(),v($,null,[a("div",W,[(_(!0),v($,null,L(o(C),t=>(_(),v("div",X,[a("div",Y,[Z,a("div",ee,[a("div",te,[a("span",se,q(t.online),1),r(D,null,{default:y(()=>[a("div",oe,[r(g,{href:u.route("clientarea.sellers.show",t.id),title:"Ventas",icon:o(R)},null,8,["href","icon"]),r(g,{href:u.route("clientarea.sellers.archings.index",t.id),title:"Caja",icon:o(P)},null,8,["href","icon"]),r(g,{href:u.route("clientarea.sellers.reports.index",t.id),title:"Reportes",icon:o(T)},null,8,["href","icon"])]),a("div",ae,[r(g,{href:u.route("clientarea.sellers.blocked-numbers.index",t.id),title:"Dígitos bloqueados",icon:o(E)},null,8,["href","icon"]),r(g,{onClick:B=>M(t),title:"Editar",icon:o(H)},null,8,["onClick","icon"]),r(g,{onClick:B=>o(V)(t.id),title:j[t.status],icon:o(E)},null,8,["onClick","title","icon"]),r(g,{onClick:B=>o(k)(t.id),title:"Eliminar",icon:o(J)},null,8,["onClick","icon"])])]),_:2},1024)]),a("div",le,[a("span",re,[a("span",ne,q(t.name),1),t.status!="enabled"?(_(),v("span",ie," (Bloqueado) ")):S("",!0)]),a("span",ce,q(t.email),1)])])])]))),256))]),r(z,{show:e.value,title:"Vendedor",onOnCancel:N,onOnSubmit:x},{default:y(()=>[r(w,{text:"Nombre",modelValue:o(l).name,"onUpdate:modelValue":m[0]||(m[0]=t=>o(l).name=t),required:""},null,8,["modelValue"]),r(w,{text:"Correo",modelValue:o(l).email,"onUpdate:modelValue":m[1]||(m[1]=t=>o(l).email=t),type:"email",required:"",autocomple:"nope"},null,8,["modelValue"]),s.value?(_(),v($,{key:0},[r(w,{text:"Contraseña",modelValue:o(l).password,"onUpdate:modelValue":m[2]||(m[2]=t=>o(l).password=t),type:"password",required:""},null,8,["modelValue"]),r(w,{text:"Confirmar contraseña",modelValue:o(l).password_confirmation,"onUpdate:modelValue":m[3]||(m[3]=t=>o(l).password_confirmation=t),type:"password",required:""},null,8,["modelValue"])],64)):S("",!0)]),_:1},8,["show"])],64))}},de=a("span",{class:"title"}," Vendedores ",-1),Ce={__name:"Index",setup(p){const d=b(!1);return(n,c)=>(_(),O(K,{title:"Vendedores"},{header:y(()=>[de,a("button",{onClick:c[0]||(c[0]=l=>d.value=!d.value),type:"button",class:"primary-button"}," Nuevo ")]),default:y(()=>[r(ue,{triggerNew:d.value},null,8,["triggerNew"])]),_:1}))}};export{Ce as default};
