import{T as B,h as k,k as E,o as f,c as g,b as l,F as y,l as M,t as x,a,e as h,u as s,d as j,g as A}from"./app-0d1166d4.js";import{t as m}from"./toast-ca83664f.js";import{c as L,I as O}from"./helpers-01048222.js";import{_ as U}from"./FormModal-028b6377.js";import{_}from"./InputForm-ceebd1ff.js";import{_ as p,a as z}from"./Dropdown-dec0ec47.js";import{I as T,a as F}from"./IconReportAnalytics-36cd6b6d.js";import{c as V}from"./IconUser-d74c1992.js";import{I as R}from"./IconEdit-0d99137e.js";import{_ as G}from"./ClientareaLayout-33cea9ae.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-resolve-button-type-79fcd349.js";import"./IconList-f289c256.js";var H=V("box","IconBox",[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}]]),J=V("lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]);function K(){const r=B({id:"",name:"",email:" ",password:"",password_confirmation:""});function u(o=null){if(r.password!==r.password_confirmation){m.error("Las contraseñas no coinciden");return}r.post(route("clientarea.sellers.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.success("Guardado correctamente"),o&&o()},onError:t=>{m.error(t.message),o&&o()}})}function d(o=null){r.put(route("clientarea.sellers.update",r.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.success("Actualizado correctamente"),o&&o()}})}function n(o=null){r.put(route("clientarea.toggle-status",r.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.success("Actualizado correctamente"),o&&o()}})}function v(o){L({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{r.delete(route("clientarea.sellers.destroy",o),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.success("Eliminado correctamente")}})}})}return{form:r,store:u,update:d,destroy:v,toggleStatus:n}}const P={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Q={class:"bg-card rounded-xl p-2 w-full"},W={class:"flex gap-2 w-full"},X=l("div",{class:"bg-white rounded-xl w-1/3 px-1"},[l("img",{src:"/images/vendedor.png",alt:"",class:"w-20 h-20 object-contain"})],-1),Y={class:"text-xs text-gray-600 w-full h-full"},Z={class:"flex justify-between w-full"},D={class:""},ee={class:"px-1 py-1"},te={class:"px-1 py-1"},se={class:"flex flex-col"},re={class:"text-base"},oe={__name:"SellerTab",props:{sellers:{type:Object,required:!0},triggerNew:{type:Boolean,required:!0}},setup(r){const u=r,d=k(!1),n=k(!0),{store:v,update:o,form:t,toggleStatus:S,destroy:C}=K(),I=i=>{t.id=i,S()},N=()=>{n.value?v(w):o(w)},w=()=>{t.reset(),n.value=!0,d.value=!1},$=i=>{n.value=!1,t.id=i.id,t.name=i.name,t.email=i.email,d.value=!0};E(()=>u.triggerNew,i=>{n.value=!0,d.value=!0});const q={enabled:"Bloquear",disabled:"Desbloquear"};return(i,c)=>(f(),g(y,null,[l("div",P,[(f(!0),g(y,null,M(r.sellers,e=>(f(),g("div",Q,[l("div",W,[X,l("div",Y,[l("div",Z,[l("span",D,x(e.status=="enabled"?"Activo":"Inactivo"),1),a(z,null,{default:h(()=>[l("div",ee,[a(p,{href:i.route("clientarea.sellers.show",e.id),title:"Ventas",icon:s(T)},null,8,["href","icon"]),a(p,{href:i.route("clientarea.sellers.archings.index",e.id),title:"Caja",icon:s(H)},null,8,["href","icon"]),a(p,{href:i.route("clientarea.sellers.reports.index",e.id),title:"Reportes",icon:s(F)},null,8,["href","icon"])]),l("div",te,[a(p,{onClick:b=>$(e),title:"Editar",icon:s(R)},null,8,["onClick","icon"]),a(p,{onClick:b=>I(e.id),title:q[e.status],icon:s(J)},null,8,["onClick","title","icon"]),a(p,{onClick:b=>s(C)(e.id),title:"Eliminar",icon:s(O)},null,8,["onClick","icon"])])]),_:2},1024)]),l("div",se,[l("span",re,x(e.name),1),l("span",null,x(e.email),1)])])])]))),256))]),a(U,{show:d.value,title:"Vendedor",onOnCancel:w,onOnSubmit:N},{default:h(()=>[a(_,{text:"Nombre",modelValue:s(t).name,"onUpdate:modelValue":c[0]||(c[0]=e=>s(t).name=e),required:""},null,8,["modelValue"]),a(_,{text:"Correo",modelValue:s(t).email,"onUpdate:modelValue":c[1]||(c[1]=e=>s(t).email=e),type:"email",required:"",autocomple:"nope"},null,8,["modelValue"]),n.value?(f(),g(y,{key:0},[a(_,{text:"Contraseña",modelValue:s(t).password,"onUpdate:modelValue":c[2]||(c[2]=e=>s(t).password=e),type:"password",required:""},null,8,["modelValue"]),a(_,{text:"Confirmar contraseña",modelValue:s(t).password_confirmation,"onUpdate:modelValue":c[3]||(c[3]=e=>s(t).password_confirmation=e),type:"password",required:""},null,8,["modelValue"])],64)):j("",!0)]),_:1},8,["show"])],64))}},le=l("span",{class:"title"}," Vendedores ",-1),we={__name:"Index",props:{sellers:{type:Object,required:!0}},setup(r){const u=k(!1);return(d,n)=>(f(),A(G,{title:"Vendedores"},{header:h(()=>[le,l("button",{onClick:n[0]||(n[0]=v=>u.value=!u.value),type:"button",class:"simple-button"}," Nuevo ")]),default:h(()=>[a(oe,{sellers:r.sellers,triggerNew:u.value},null,8,["sellers","triggerNew"])]),_:1}))}};export{we as default};
