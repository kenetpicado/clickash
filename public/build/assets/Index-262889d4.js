import{r as V,T as O,e as q,o,c,b as l,F as k,f as S,t as f,a,g as w,u as t,d as h,h as $,n as M}from"./app-745b025e.js";import{_ as j}from"./FormModal-722a9522.js";import{_ as y}from"./InputForm-7c3558dc.js";import{_ as U}from"./Checkbox-3db74227.js";import{t as x}from"./toast-c03b0082.js";import{_ as v,I as D,a as E}from"./Dropdown-b1cdb8a5.js";import{c as C}from"./createVueComponent-8c1b233c.js";import{I as F}from"./IconDeviceWatch-c6ef9f9b.js";import{c as G,I as X}from"./helpers-a7606866.js";import{I as H}from"./IconEdit-885726a7.js";import{_ as W}from"./ThePaginator-86774e00.js";import{_ as J}from"./Transaction-812178ed.js";import{_ as K}from"./StatCard-cb50be98.js";import{I as P}from"./IconCurrencyDollar-d3209fd9.js";import{_ as Q}from"./ClientareaLayout-41113461.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./IconList-e9d86a50.js";import"./Carbon-e7b34390.js";var L=C("eye-dollar","IconEyeDollar",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M13.193 17.924c-.39 .05 -.788 .076 -1.193 .076c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.005 0 5.592 1.394 7.761 4.181",key:"svg-1"}],["path",{d:"M21 15h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5",key:"svg-2"}],["path",{d:"M19 21v1m0 -8v1",key:"svg-3"}]]),Y=C("lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]),Z=C("number","IconNumber",[["path",{d:"M4 17v-10l7 10v-10",key:"svg-0"}],["path",{d:"M15 17h5",key:"svg-1"}],["path",{d:"M17.5 10m-2.5 0a2.5 3 0 1 0 5 0a2.5 3 0 1 0 -5 0",key:"svg-2"}]]),A=C("report-analytics","IconReportAnalytics",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M9 17v-5",key:"svg-2"}],["path",{d:"M12 17v-1",key:"svg-3"}],["path",{d:"M15 17v-3",key:"svg-4"}]]),ee=C("user-check","IconUserCheck",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-1"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-2"}]]);const te={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},se={class:"bg-card rounded-xl p-2 w-full"},le={class:"flex justify-between"},ae={class:"px-1 py-1"},ne={class:"px-1 py-1"},ie={class:"flex items-center gap-2 mb-3"},re=l("div",{class:"bg-white rounded-xl"},[l("img",{src:"/games.png",alt:"",class:"w-20 h-20"})],-1),oe={class:"flex flex-col gap-1 text-xs text-gray-600"},ue={key:0},ce={key:1},de={key:2},me={class:"w-full text-center bg-white py-1 rounded-xl text-gray-600 text-xs"},pe={key:0},ge={key:1},fe={class:"grid grid-cols-2 gap-4"},ve={class:"grid grid-cols-2 gap-4 mb-1"},_e={key:0,class:"grid grid-cols-2 gap-4"},ye={__name:"RaffleTab",props:{raffles:{type:Object,required:!0}},setup(r){const u=V(!1),e=O({raffle_name:null,raffle_id:null,settings:{super_x:!0,date:!1,min:null,max:null,general_limit:null,individual_limit:null,multiplier:70}});function g(i){e.raffle_name=i.raffle.name,e.raffle_id=i.raffle_id,Object.assign(e.settings,i.settings),u.value=!0}function p(){e.put(route("clientarea.raffles.update",e.raffle_id),{preserveScroll:!0,onSuccess:()=>{n(),x.success("Rifa actualizada")}})}const n=()=>{e.reset(),u.value=!1};return q(()=>e.settings.date,i=>{i&&(e.settings.min=null,e.settings.max=null)}),(i,m)=>(o(),c(k,null,[l("div",te,[(o(!0),c(k,null,S(r.raffles,s=>(o(),c("div",se,[l("div",le,[l("span",null,f(s.raffle.name),1),a(E,null,{default:w(()=>[l("div",ae,[a(v,{href:i.route("clientarea.raffles.show",s.raffle_id),title:"Ventas",icon:t(L)},null,8,["href","icon"]),a(v,{href:i.route("clientarea.raffles.winning-numbers.index",s.raffle_id),title:"Ganadores",icon:t(ee)},null,8,["href","icon"]),a(v,{href:i.route("clientarea.raffles.reports",s.raffle_id),title:"Reportes",icon:t(A)},null,8,["href","icon"])]),l("div",ne,[a(v,{href:i.route("clientarea.raffles.blocked-numbers.index",s.raffle_id),title:"Dígitos bloqueados",icon:t(Z)},null,8,["href","icon"]),a(v,{href:i.route("clientarea.raffles.availability.index",s.raffle_id),title:"Horario",icon:t(F)},null,8,["href","icon"]),a(v,{onClick:N=>g(s),title:"Configuración",icon:t(D)},null,8,["onClick","icon"])])]),_:2},1024)]),l("div",ie,[re,l("div",oe,[l("span",null,"Super X: "+f(s.settings.super_x?"Activado":"Desactivado"),1),s.settings.general_limit?(o(),c("span",ue," Limite general en venta: C$"+f(s.settings.general_limit),1)):h("",!0),s.settings.individual_limit?(o(),c("span",ce," Limite individual en venta: C$"+f(s.settings.individual_limit),1)):h("",!0),s.settings.multiplier?(o(),c("span",de," Multiplicador: "+f(s.settings.multiplier),1)):h("",!0)])]),l("div",me,[s.settings.date?(o(),c("span",pe," Fecha ")):(o(),c("span",ge," Desde "+f(s.settings.min)+" hasta "+f(s.settings.max),1))])]))),256))]),a(j,{show:u.value,title:t(e).raffle_name,onOnCancel:n,onOnSubmit:p},{default:w(()=>[l("div",fe,[a(y,{text:"Limite general C$",modelValue:t(e).settings.general_limit,"onUpdate:modelValue":m[0]||(m[0]=s=>t(e).settings.general_limit=s),type:"number"},null,8,["modelValue"]),a(y,{text:"Limite indiv. C$",modelValue:t(e).settings.individual_limit,"onUpdate:modelValue":m[1]||(m[1]=s=>t(e).settings.individual_limit=s),type:"number"},null,8,["modelValue"])]),l("div",ve,[a(U,{checked:t(e).settings.super_x,"onUpdate:checked":m[2]||(m[2]=s=>t(e).settings.super_x=s),text:"Super X"},null,8,["checked"]),a(U,{checked:t(e).settings.date,"onUpdate:checked":m[3]||(m[3]=s=>t(e).settings.date=s),text:"Fecha"},null,8,["checked"])]),t(e).settings.date?h("",!0):(o(),c("div",_e,[a(y,{text:"Número inicio",modelValue:t(e).settings.min,"onUpdate:modelValue":m[4]||(m[4]=s=>t(e).settings.min=s),required:"",type:"number"},null,8,["modelValue"]),a(y,{text:"Número final",modelValue:t(e).settings.max,"onUpdate:modelValue":m[5]||(m[5]=s=>t(e).settings.max=s),required:"",type:"number"},null,8,["modelValue"])])),a(y,{text:"Multiplicador",modelValue:t(e).settings.multiplier,"onUpdate:modelValue":m[6]||(m[6]=s=>t(e).settings.multiplier=s),type:"number",required:""},null,8,["modelValue"])]),_:1},8,["show","title"])],64))}};function he(){const r=O({id:"",name:"",email:" ",password:"",password_confirmation:""});function u(n=null){if(r.password!==r.password_confirmation){x.error("Las contraseñas no coinciden");return}r.post(route("clientarea.sellers.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{x.success("Guardado correctamente"),n&&n()},onError:i=>{x.error(i.message),n&&n()}})}function e(n=null){r.put(route("clientarea.sellers.update",r.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{x.success("Actualizado correctamente"),n&&n()}})}function g(n=null){r.put(route("clientarea.toggle-status",r.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{x.success("Actualizado correctamente"),n&&n()}})}function p(n){G({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{r.delete(route("clientarea.sellers.destroy",n),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{x.success("Eliminado correctamente")}})}})}return{form:r,store:u,update:e,destroy:p,toggleStatus:g}}const be={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},ke={class:"bg-card rounded-xl p-2 w-full"},xe={class:"flex gap-2 w-full"},we=l("div",{class:"bg-white rounded-xl w-1/3 px-1"},[l("img",{src:"/games.png",alt:"",class:"w-20 h-20"})],-1),$e={class:"text-xs text-gray-600 w-full h-full"},Ve={class:"flex justify-between w-full"},Ce={class:""},Se={class:"px-1 py-1"},Ie={class:"px-1 py-1"},Me={class:"flex flex-col"},qe={class:"text-base"},Ne={__name:"SellerTab",props:{sellers:{type:Object,required:!0},triggerNew:{type:Boolean,required:!0}},setup(r){const u=r,e=V(!1),g=V(!0),{store:p,update:n,form:i,toggleStatus:m,destroy:s}=he(),N=_=>{i.id=_,m()},R=()=>{g.value?p(I):n(I)},I=()=>{i.reset(),g.value=!0,e.value=!1},z=_=>{g.value=!1,i.id=_.id,i.name=_.name,i.email=_.email,e.value=!0};q(()=>u.triggerNew,_=>{g.value=!0,e.value=!0});const B={enabled:"Bloquear",disabled:"Desbloquear"};return(_,b)=>(o(),c(k,null,[l("div",be,[(o(!0),c(k,null,S(r.sellers,d=>(o(),c("div",ke,[l("div",xe,[we,l("div",$e,[l("div",Ve,[l("span",Ce,f(d.status=="enabled"?"Activo":"Inactivo"),1),a(E,null,{default:w(()=>[l("div",Se,[a(v,{href:_.route("clientarea.sellers.show",d.id),title:"Ventas",icon:t(L)},null,8,["href","icon"]),a(v,{href:_.route("clientarea.sellers.balance",d.id),title:"Caja",icon:t(A)},null,8,["href","icon"])]),l("div",Ie,[a(v,{onClick:T=>z(d),title:"Editar",icon:t(H)},null,8,["onClick","icon"]),a(v,{onClick:T=>N(d.id),title:B[d.status],icon:t(Y)},null,8,["onClick","title","icon"]),a(v,{onClick:T=>t(s)(d.id),title:"Eliminar",icon:t(X)},null,8,["onClick","icon"])])]),_:2},1024)]),l("div",Me,[l("span",qe,f(d.name),1),l("span",null,f(d.email),1)])])])]))),256))]),a(j,{show:e.value,title:"Vendedor",onOnCancel:I,onOnSubmit:R},{default:w(()=>[a(y,{text:"Nombre",modelValue:t(i).name,"onUpdate:modelValue":b[0]||(b[0]=d=>t(i).name=d),required:""},null,8,["modelValue"]),a(y,{text:"Correo",modelValue:t(i).email,"onUpdate:modelValue":b[1]||(b[1]=d=>t(i).email=d),type:"email",required:"",autocomple:"nope"},null,8,["modelValue"]),g.value?(o(),c(k,{key:0},[a(y,{text:"Contraseña",modelValue:t(i).password,"onUpdate:modelValue":b[2]||(b[2]=d=>t(i).password=d),type:"password",required:""},null,8,["modelValue"]),a(y,{text:"Confirmar contraseña",modelValue:t(i).password_confirmation,"onUpdate:modelValue":b[3]||(b[3]=d=>t(i).password_confirmation=d),type:"password",required:""},null,8,["modelValue"])],64)):h("",!0)]),_:1},8,["show"])],64))}},Te={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},Ue={key:0,class:"w-full text-center text-gray-400"},Oe={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4"},je={__name:"TransactionTab",props:{transactions:{type:Object,required:!0},dailyTransactions:{type:Number,required:!0}},setup(r){const e=[{title:"Ventas del dia",value:"C$"+r.dailyTransactions.toLocaleString(),icon:P}];return(g,p)=>(o(),c(k,null,[l("div",Te,[(o(),c(k,null,S(e,n=>a(K,{stat:n,key:n.title},null,8,["stat"])),64))]),r.transactions.data.length==0?(o(),c("div",Ue," No hay transacciones ")):(o(),c("div",Oe,[(o(!0),c(k,null,S(r.transactions.data,n=>(o(),$(J,{transaction:n,key:n.id},null,8,["transaction"]))),128))])),a(W,{links:r.transactions.links},null,8,["links"])],64))}},Ee={class:"title"},tt={__name:"Index",props:{raffles:{type:Object,required:!0},sellers:{type:Object,required:!0},transactions:{type:Object,required:!0},daily_transactions:{type:Number,required:!0}},setup(r){const u=V(localStorage.getItem("selectedTab")||"raffle"),e=V(!1);return q(()=>u.value,g=>{localStorage.setItem("selectedTab",g)}),(g,p)=>(o(),$(Q,{title:"Inicio"},{options:w(()=>[l("button",{type:"button",class:M(u.value=="raffle"?"active-tab":"inactive-tab"),onClick:p[0]||(p[0]=n=>u.value="raffle")}," Rifas ",2),l("button",{type:"button",class:M(u.value=="seller"?"active-tab":"inactive-tab"),onClick:p[1]||(p[1]=n=>u.value="seller")}," Vendedores ",2),l("button",{type:"button",class:M(u.value=="transaction"?"active-tab":"inactive-tab"),onClick:p[2]||(p[2]=n=>u.value="transaction")}," Transacciones ",2)]),header:w(()=>[l("span",Ee,f(u.value=="raffle"?"Rifas":u.value=="seller"?"Vendedores":"Transacciones"),1),u.value=="seller"?(o(),c("button",{key:0,onClick:p[3]||(p[3]=n=>e.value=!e.value),type:"button",class:"simple-button"}," Nuevo ")):h("",!0)]),default:w(()=>[u.value=="raffle"?(o(),$(ye,{key:0,raffles:r.raffles},null,8,["raffles"])):h("",!0),u.value=="seller"?(o(),$(Ne,{key:1,sellers:r.sellers,triggerNew:e.value},null,8,["sellers","triggerNew"])):h("",!0),u.value=="transaction"?(o(),$(je,{key:2,transactions:r.transactions,dailyTransactions:r.daily_transactions},null,8,["transactions","dailyTransactions"])):h("",!0)]),_:1}))}};export{tt as default};
