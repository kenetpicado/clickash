import{a as V,_ as j}from"./Dropdown-ea130fef.js";import{_ as y}from"./InputForm-a4f5b969.js";import{_ as k}from"./SelectForm-f0511e02.js";import{_ as w}from"./FormModal-74af65ef.js";import{_ as R}from"./StatCard-0c71ae74.js";import{_ as T}from"./ClientareaLayout-e1d03b01.js";import{C as x}from"./Carbon-e7b34390.js";import{I as q,c as N}from"./helpers-4abbe5f5.js";import{t as f}from"./toast-32715f94.js";import{j as P,r as D,T as L,e as M,i as A,o as s,h as b,g as d,b as t,t as u,a as c,c as i,u as l,f as C,F as S,O}from"./app-8034a95a.js";import{I as g}from"./IconCurrencyDollar-1a632271.js";import"./createVueComponent-68b58a49.js";import"./IconList-50f26f53.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"title"},U={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},F={key:0,class:"mb-4"},Y={key:1,class:"mb-4"},G={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8"},H={class:"flex items-center justify-between mb-4 text-gray-600"},z=t("span",{class:"title"}," Movimientos ",-1),J={key:2,class:"text-center text-gray-400 mb-4"},K={key:3,class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},Q={class:"bg-card p-3 rounded-xl"},W={class:"flex items-center justify-between"},X={class:"text-gray-400 text-sm mb-2"},Z={class:"px-1 py-1"},ee={class:"flex items-center justify-between"},te={class:"text-sm text-gray-600 font-bold"},se={class:"text-xl text-gray-600 font-bold"},ae=t("option",{value:"RETIRO"},"RETIRO",-1),oe=t("option",{value:"DEPOSITO"},"DEPOSITO",-1),xe={__name:"Index",props:{cashbox:{type:Object,required:!0},seller:{type:Object,required:!0},archings:{type:Object,required:!0}},setup(m){const a=m,o=P({date:""}),_=D(!1),r=L({id:null,type:"RETIRO",amount:null}),h=new URLSearchParams(window.location.search);h.get("date")&&(o.date=h.get("date")),M(()=>[o.date],([p])=>{p||delete o.date,O.get(route("clientarea.sellers.archings.index",a.seller.id),o,{preserveState:!0,preserveScroll:!0,only:["cashbox","archings"]})});const I=A(()=>[{title:"Ingresos",value:"C$ "+a.cashbox.income.toLocaleString(),icon:g},{title:"Egresos",value:"C$ "+a.cashbox.expenditure.toLocaleString(),icon:g},{title:a.cashbox.revenue>=0?"Ganancias":"Perdidas",value:"C$ "+a.cashbox.revenue.toLocaleString(),icon:g}]);function v(){r.reset(),_.value=!1}function $(){if(r.type=="RETIRO"&&r.amount>a.cashbox.revenue){f.error("No puede retirar más de lo que tiene");return}r.post(route("clientarea.sellers.archings.store",a.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{v(),f.success("Movimiento agregado")}})}function E(p){N({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{O.delete(route("clientarea.sellers.archings.destroy",[a.seller.id,p]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{f.success("Eliminado correctamente")}})}})}return(p,n)=>(s(),b(T,{title:"Caja"},{header:d(()=>[t("span",B," Caja: "+u(m.seller.name),1)]),default:d(()=>[t("div",U,[c(y,{modelValue:o.date,"onUpdate:modelValue":n[0]||(n[0]=e=>o.date=e),text:"Fecha",type:"date"},null,8,["modelValue"])]),o.date?(s(),i("h2",Y,"Caja del DIA "+u(l(x).create(o.date).format("d/m/Y")),1)):(s(),i("h2",F,"Caja de la SEMANA en curso")),t("div",G,[(s(!0),i(S,null,C(I.value,e=>(s(),b(R,{stat:e,key:e.title},null,8,["stat"]))),128))]),t("div",H,[z,t("button",{onClick:n[1]||(n[1]=e=>_.value=!0),type:"button",class:"simple-button"}," Nuevo ")]),m.archings.data.length==0?(s(),i("div",J," No hay movimientos ")):(s(),i("div",K,[(s(!0),i(S,null,C(m.archings.data,e=>(s(),i("div",Q,[t("div",W,[t("div",X,u(l(x).create(e.created_at).format("d/m/Y H:i")),1),c(V,null,{default:d(()=>[t("div",Z,[c(j,{onClick:re=>E(e.id),title:"Eliminar",icon:l(q)},null,8,["onClick","icon"])])]),_:2},1024)]),t("div",ee,[t("span",te,u(e.type),1),t("span",se," C$"+u(e.amount),1)])]))),256))])),c(w,{show:_.value,title:"Movimiento",onOnCancel:v,onOnSubmit:$},{default:d(()=>[c(k,{modelValue:l(r).type,"onUpdate:modelValue":n[2]||(n[2]=e=>l(r).type=e),text:"Tipo",required:""},{default:d(()=>[ae,oe]),_:1},8,["modelValue"]),c(y,{modelValue:l(r).amount,"onUpdate:modelValue":n[3]||(n[3]=e=>l(r).amount=e),type:"number",text:"Cantidad",required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{xe as default};
