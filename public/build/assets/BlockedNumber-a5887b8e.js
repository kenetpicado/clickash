import{_ as c}from"./InputForm-96fbdb63.js";import{_ as y}from"./FormModal-d9d9b03a.js";import{T as k}from"./TableSection-4d52a19c.js";import{I as v,c as N}from"./helpers-bba50f09.js";import{t as u}from"./toast-f5c64931.js";import{T as V,o as l,c as n,a as r,f as _,F as S,h as C,d as q,u as i,b as o,t as p,O as x}from"./app-6addb345.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./createVueComponent-654ebc59.js";const O=o("th",null,"Numero",-1),B=o("th",null,"Limite individual",-1),E=o("th",null,"Limite general",-1),L=o("th",null,"Acciones",-1),$={class:"font-semibold"},M={key:0,class:"badge-red"},T={key:1},w={key:0,class:"badge-red"},U={key:1},j=["onClick"],A={key:0},D=o("td",{colspan:"4",class:"text-center"},"No hay datos",-1),F=[D],W={__name:"BlockedNumber",props:{raffle:{type:Object,required:!0},blockeds:{type:Object,required:!0},openModal:{type:Boolean,required:!0}},emits:["update:openModal"],setup(a,{emit:g}){const m=a,t=V({number:null,settings:{general_limit:null,individual_limit:null}}),b=()=>{if(!t.settings.general_limit&&!t.settings.individual_limit){u.error("Debe ingresar al menos un limite");return}if(m.blockeds.find(d=>d.number==t.number)){u.error("Numero ya bloqueado");return}t.post(route("clientarea.raffles.blocked-numbers.store",m.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{f(),u.success("Numero bloqueado")}})},f=()=>{t.reset(),g("update:openModal",!1)},h=d=>{N({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{x.delete(route("clientarea.raffles.blocked-numbers.destroy",[m.raffle.id,d]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{u.success("Eliminado correctamente")},onError:s=>{console.log(s)}})}})};return(d,s)=>(l(),n("div",null,[r(k,null,{header:_(()=>[O,B,E,L]),body:_(()=>[(l(!0),n(S,null,C(a.blockeds,e=>(l(),n("tr",null,[o("td",$,p(e.number),1),o("td",null,[e.settings.individual_limit?(l(),n("span",M," C$"+p(e.settings.individual_limit),1)):(l(),n("span",T," Ninguno "))]),o("td",null,[e.settings.general_limit?(l(),n("span",w," C$"+p(e.settings.general_limit),1)):(l(),n("span",U," Ninguno "))]),o("td",null,[o("span",{tooltip:"Eliminar",role:"button",onClick:I=>h(e.id)},[r(i(v),{size:"22"})],8,j)])]))),256)),a.blockeds.length==0?(l(),n("tr",A,F)):q("",!0)]),_:1}),r(y,{show:a.openModal,title:"Numero bloqueado",onOnCancel:f,onOnSubmit:b},{default:_(()=>[r(c,{text:"Numero",modelValue:i(t).number,"onUpdate:modelValue":s[0]||(s[0]=e=>i(t).number=e),type:"number",required:""},null,8,["modelValue"]),r(c,{text:"Limite individual",modelValue:i(t).settings.individual_limit,"onUpdate:modelValue":s[1]||(s[1]=e=>i(t).settings.individual_limit=e),type:"number"},null,8,["modelValue"]),r(c,{text:"Limite general",modelValue:i(t).settings.general_limit,"onUpdate:modelValue":s[2]||(s[2]=e=>i(t).settings.general_limit=e),type:"number"},null,8,["modelValue"])]),_:1},8,["show"])]))}};export{W as default};
