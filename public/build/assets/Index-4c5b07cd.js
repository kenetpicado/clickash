import{a as E,_ as k}from"./Dropdown-18254fcc.js";import{_ as h}from"./InputForm-34b1c708.js";import{_ as w}from"./SelectForm-3d27945b.js";import{_ as j}from"./FormModal-da486948.js";import{_ as R}from"./StatCard-64784963.js";import{_ as T}from"./ClientareaLayout-99bc91c9.js";import{C as y}from"./Carbon-e7b34390.js";import{I as q,c as B}from"./helpers-15fb4ee1.js";import{t as g}from"./toast-f96a3e78.js";import{j as L,r as N,T as D,e as M,i as P,o as a,h as x,g as d,b as t,t as u,a as c,c as l,u as i,f as S,F as C,O}from"./app-957c39b0.js";import{I as _}from"./IconCurrencyDollar-1a6420f7.js";import"./createVueComponent-ef9119d8.js";import"./IconList-fd3b6809.js";import"./_plugin-vue_export-helper-c27b6911.js";const A={class:"title"},U={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},F={key:0,class:"mb-4"},Y={key:1,class:"mb-4"},H={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8"},z={class:"flex items-center justify-between mb-4 text-gray-600"},G=t("span",{class:"title"}," Movimientos ",-1),J={key:2,class:"text-center text-gray-400 mb-4"},K={key:3,class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},Q={class:"bg-card p-3 rounded-xl"},W={class:"flex items-center justify-between"},X={class:"text-gray-400 text-sm mb-2"},Z={class:"px-1 py-1"},ee={class:"flex items-center justify-between"},te={class:"text-sm text-gray-600 font-bold"},ae={class:"text-xl text-gray-600 font-bold"},se=t("option",{value:"RETIRO"},"RETIRO",-1),oe=t("option",{value:"DEPOSITO"},"DEPOSITO",-1),ye={__name:"Index",props:{balance:{type:Object,required:!0},seller:{type:Object,required:!0},archings:{type:Object,required:!0}},setup(m){const s=m,o=L({date:""}),f=N(!1),r=D({id:null,type:"RETIRO",amount:null}),v=new URLSearchParams(window.location.search);v.get("date")&&(o.date=v.get("date")),M(()=>[o.date],([p])=>{p||delete o.date,O.get(route("clientarea.sellers.archings.index",s.seller.id),o,{preserveState:!0,preserveScroll:!0,only:["balance","archings"]})});const $=P(()=>[{title:"Ventas",value:"C$"+s.balance.sales.toLocaleString(),icon:_},{title:"Ingresos",value:"C$"+s.balance.income.toLocaleString(),icon:_},{title:"Egresos",value:"C$"+s.balance.expenditure.toLocaleString(),icon:_},{title:"Balance",value:"C$"+s.balance.balance.toLocaleString(),icon:_}]);function b(){r.reset(),f.value=!1}function I(){if(r.type=="RETIRO"&&r.amount>s.balance.balance){g.error("No puede retirar más de lo que tiene");return}r.post(route("clientarea.sellers.archings.store",s.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),g.success("Movimiento agregado")}})}function V(p){B({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{O.delete(route("clientarea.sellers.archings.destroy",[s.seller.id,p]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g.success("Eliminado correctamente")}})}})}return(p,n)=>(a(),x(T,{title:"Caja"},{header:d(()=>[t("span",A," Caja: "+u(m.seller.name),1)]),default:d(()=>[t("div",U,[c(h,{modelValue:o.date,"onUpdate:modelValue":n[0]||(n[0]=e=>o.date=e),text:"Fecha",type:"date"},null,8,["modelValue"])]),o.date?(a(),l("h2",Y,"Balance del DIA "+u(i(y).create(o.date).format("d/m/Y")),1)):(a(),l("h2",F,"Balance de la SEMANA en curso")),t("div",H,[(a(!0),l(C,null,S($.value,e=>(a(),x(R,{stat:e,key:e.title},null,8,["stat"]))),128))]),t("div",z,[G,t("button",{onClick:n[1]||(n[1]=e=>f.value=!0),type:"button",class:"simple-button"}," Nuevo ")]),m.archings.data.length==0?(a(),l("div",J," No hay movimientos ")):(a(),l("div",K,[(a(!0),l(C,null,S(m.archings.data,e=>(a(),l("div",Q,[t("div",W,[t("div",X,u(i(y).create(e.created_at).format("d/m/Y H:i")),1),c(E,null,{default:d(()=>[t("div",Z,[c(k,{onClick:re=>V(e.id),title:"Eliminar",icon:i(q)},null,8,["onClick","icon"])])]),_:2},1024)]),t("div",ee,[t("span",te,u(e.type),1),t("span",ae," C$"+u(e.amount),1)])]))),256))])),c(j,{show:f.value,title:"Movimiento",onOnCancel:b,onOnSubmit:I},{default:d(()=>[c(w,{modelValue:i(r).type,"onUpdate:modelValue":n[2]||(n[2]=e=>i(r).type=e),text:"Tipo",required:""},{default:d(()=>[se,oe]),_:1},8,["modelValue"]),c(h,{modelValue:i(r).amount,"onUpdate:modelValue":n[3]||(n[3]=e=>i(r).amount=e),type:"number",text:"Cantidad",required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{ye as default};
