import{a as V,_ as k}from"./Dropdown-b1cdb8a5.js";import{_ as y}from"./InputForm-7c3558dc.js";import{_ as w}from"./SelectForm-1e9e5186.js";import{_ as B}from"./FormModal-722a9522.js";import{_ as R}from"./StatCard-cb50be98.js";import{_ as T}from"./ClientareaLayout-41113461.js";import{C as h}from"./Carbon-e7b34390.js";import{I as j,c as q}from"./helpers-a7606866.js";import{t as f}from"./toast-c03b0082.js";import{j as N,r as D,T as L,e as M,i as P,o as a,h as x,g as d,b as t,t as u,a as c,c as n,u as i,f as S,F as O,O as C}from"./app-745b025e.js";import{I as g}from"./IconCurrencyDollar-d3209fd9.js";import"./createVueComponent-8c1b233c.js";import"./IconList-e9d86a50.js";import"./_plugin-vue_export-helper-c27b6911.js";const A={class:"title"},U={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},F={key:0,class:"mb-4"},Y={key:1,class:"mb-4"},H={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8"},z={class:"flex items-center justify-between mb-4 text-gray-600"},G=t("span",{class:"title"}," Movimientos ",-1),J={key:2,class:"text-center text-gray-400 mb-4"},K={key:3,class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},Q={class:"bg-card p-3 rounded-xl"},W={class:"flex items-center justify-between"},X={class:"text-gray-400 text-sm mb-2"},Z={class:"px-1 py-1"},ee={class:"flex items-center justify-between"},te={class:"text-sm text-gray-600 font-bold"},ae={class:"text-xl text-gray-600 font-bold"},se=t("option",{value:"RETIRO"},"RETIRO",-1),oe=t("option",{value:"DEPOSITO"},"DEPOSITO",-1),he={__name:"Balance",props:{balance:{type:Object,required:!0},seller:{type:Object,required:!0},archings:{type:Object,required:!0}},setup(m){const l=m,s=N({date:""}),_=D(!1),o=L({id:null,type:"RETIRO",amount:null}),b=new URLSearchParams(window.location.search);b.get("date")&&(s.date=b.get("date")),M(()=>[s.date],([p])=>{p||delete s.date,C.get(route("clientarea.sellers.balance",l.seller.id),s,{preserveState:!0,preserveScroll:!0,only:["balance","archings"]})});const $=P(()=>[{title:"Ingresos",value:"C$"+l.balance.income.toLocaleString(),icon:g},{title:"Egresos",value:"C$"+l.balance.expenditure.toLocaleString(),icon:g},{title:"Balance",value:"C$"+l.balance.balance.toLocaleString(),icon:g}]);function v(){o.reset(),_.value=!1}function E(){if(o.type=="RETIRO"&&o.amount>l.balance.balance){f.error("No puede retirar más de lo que tiene");return}o.post(route("clientarea.sellers.archings.store",l.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{v(),f.success("Movimiento agregado")}})}function I(p){q({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{C.delete(route("clientarea.sellers.archings.destroy",[l.seller.id,p]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{f.success("Eliminado correctamente")}})}})}return(p,r)=>(a(),x(T,{title:"Balance"},{header:d(()=>[t("span",A," Balance: "+u(m.seller.name),1)]),default:d(()=>[t("div",U,[c(y,{modelValue:s.date,"onUpdate:modelValue":r[0]||(r[0]=e=>s.date=e),text:"Fecha",type:"date"},null,8,["modelValue"])]),s.date?(a(),n("h2",Y,"Balance del DIA "+u(i(h).create(s.date).format("d/m/Y")),1)):(a(),n("h2",F,"Balance de la SEMANA en curso")),t("div",H,[(a(!0),n(O,null,S($.value,e=>(a(),x(R,{stat:e,key:e.title},null,8,["stat"]))),128))]),t("div",z,[G,t("button",{onClick:r[1]||(r[1]=e=>_.value=!0),type:"button",class:"simple-button"}," Nuevo ")]),m.archings.data.length==0?(a(),n("div",J," No hay movimientos ")):(a(),n("div",K,[(a(!0),n(O,null,S(m.archings.data,e=>(a(),n("div",Q,[t("div",W,[t("div",X,u(i(h).create(e.created_at).format("d/m/Y H:i")),1),c(V,null,{default:d(()=>[t("div",Z,[c(k,{onClick:re=>I(e.id),title:"Eliminar",icon:i(j)},null,8,["onClick","icon"])])]),_:2},1024)]),t("div",ee,[t("span",te,u(e.type),1),t("span",ae," C$"+u(e.amount),1)])]))),256))])),c(B,{show:_.value,title:"Movimiento",onOnCancel:v,onOnSubmit:E},{default:d(()=>[c(w,{modelValue:i(o).type,"onUpdate:modelValue":r[2]||(r[2]=e=>i(o).type=e),text:"Tipo",required:""},{default:d(()=>[se,oe]),_:1},8,["modelValue"]),c(y,{modelValue:i(o).amount,"onUpdate:modelValue":r[3]||(r[3]=e=>i(o).amount=e),type:"number",text:"Cantidad",required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{he as default};
