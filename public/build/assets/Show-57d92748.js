import{T as N}from"./TableSection-80d82f57.js";import{_ as q,C as f}from"./Carbon-23c039fc.js";import{_ as O}from"./AppLayout-028e59c2.js";import{_ as E}from"./AddButton-0bd50f98.js";import{_ as F}from"./InputForm-a18fcb1d.js";import{_ as j}from"./FormModal-6aeb2ebe.js";import{r as T,T as B,o,e as v,f as u,b as e,t as s,d as m,n as x,c as a,h as p,F as _,a as h,u as n,j as I,O as D}from"./app-5962aa57.js";import{t as g}from"./toast-53144f94.js";import{I as z,c as A}from"./helpers-1e720f9b.js";import{I as H}from"./IconEdit-022024f7.js";import"./_plugin-vue_export-helper-c27b6911.js";const M={class:"title"},R={class:"flex gap-3 overflow-x-auto hide-scrollbar mb-4"},L=e("th",null,"Vendedor",-1),U=e("th",null,"Turno",-1),G=e("th",null,"Monto",-1),J=e("th",null,"Numero",-1),K={class:"text-xs text-gray-400 mb-1"},P={class:"mb-1"},Q={class:"text-gray-400"},W={class:"badge-blue whitespace-nowrap"},X={class:"font-semibold"},Y={key:0},Z=e("td",{colspan:"4",class:"text-center"},"No hay datos",-1),ee=[Z],te={class:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-5"},oe={class:"flex justify-between items-center bg-white px-4 py-6 rounded-xl"},se={class:"text-2xl font-bold"},re={tooltip:"Eliminar",role:"button"},ae={key:0,class:"text-center"},le=e("th",null,"Dia",-1),ne=e("th",null,"Horario",-1),ie=e("th",null,"Sorteos",-1),ue=e("th",null,"Acciones",-1),ce={class:"whitespace-nowrap"},de={class:"badge-blue m-1 whitespace-nowrap"},me=["onClick"],Ne={__name:"Show",props:{raffle:{type:Object,required:!0},transactions:{type:Object,required:!0},blockeds:{type:Object,required:!0},availability:{type:Object,required:!0}},setup(i){const b=i,w=[{name:"Inicio",route:route("clientarea.index")},{name:"Rifas",route:route("clientarea.raffles.index")},{name:b.raffle.name,route:route("clientarea.raffles.show",b.raffle.id)}],l=T(0),k=T(!1),c=B({number:null}),$=()=>{if(isNaN(c.number)){g.error("Numero invalido");return}if(b.blockeds.find(d=>d.number==c.number)){g.error("Numero ya bloqueado");return}c.post(route("clientarea.raffles.blocked-numbers.store",b.raffle.id),{onSuccess:()=>{C(),g.success("Numero bloqueado")}})},C=()=>{c.reset(),k.value=!1},S=d=>{console.log(d)},V=d=>{A({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{D.delete(route("clientarea.raffles.blocked-numbers.destroy",[b.raffle.id,d]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g.success("Eliminado correctamente")},onError:r=>{console.log(r)}})}})};return(d,r)=>(o(),v(O,{title:"Rifa",breads:w},{header:u(()=>[e("span",M,s(i.raffle.name),1),l.value==1?(o(),v(E,{key:0,onClick:r[0]||(r[0]=t=>k.value=!0)})):m("",!0)]),default:u(()=>[e("div",R,[e("div",{class:x(l.value==0?"active-tab":"inactive-tab"),onClick:r[1]||(r[1]=t=>l.value=0),role:"button"}," Ventas ",2),e("div",{class:x(l.value==1?"active-tab":"inactive-tab"),onClick:r[2]||(r[2]=t=>l.value=1),role:"button"}," Bloqueados ",2),e("div",{class:x(l.value==2?"active-tab":"inactive-tab"),onClick:r[3]||(r[3]=t=>l.value=2),role:"button"}," Disponibilidad ",2)]),l.value==0?(o(),v(N,{key:0},{header:u(()=>[L,U,G,J]),body:u(()=>[(o(!0),a(_,null,p(i.transactions.data,t=>(o(),a("tr",null,[e("td",null,[e("div",K," #"+s(t.id)+" - "+s(n(f).create(t.created_at).diffForHumans()),1),e("div",P,s(t.user.name),1),e("div",Q,s(t.client),1)]),e("td",null,[e("span",W,s(n(f).create().setTime(t.hour).getTimeFormat()),1)]),e("td",null," C$"+s(t.amount),1),e("td",null,[e("span",X," #"+s(t.digit),1)])]))),256)),i.transactions.data.length==0?(o(),a("tr",Y,ee)):m("",!0)]),paginator:u(()=>[h(q,{links:i.transactions.links},null,8,["links"])]),_:1})):m("",!0),l.value==1?(o(),a(_,{key:1},[e("div",te,[(o(!0),a(_,null,p(i.blockeds,t=>(o(),a("div",oe,[e("div",se,s(t.number),1),e("span",re,[h(n(z),{size:"18",onClick:y=>V(t.id)},null,8,["onClick"])])]))),256))]),i.blockeds.length==0?(o(),a("div",ae," No hay datos ")):m("",!0)],64)):m("",!0),l.value==2?(o(),v(N,{key:2},{header:u(()=>[le,ne,ie,ue]),body:u(()=>[(o(!0),a(_,null,p(i.availability,t=>(o(),a("tr",null,[e("td",null,s(t.day),1),e("td",null,[e("span",ce,s(n(f).create().setTime(t.start_time).getTimeFormat())+" - ",1),I(" "+s(n(f).create().setTime(t.end_time).getTimeFormat()),1)]),e("td",null,[(o(!0),a(_,null,p(t.blocked_hours,y=>(o(),a("div",de,s(n(f).create().setTime(y).getTimeFormat()),1))),256))]),e("td",null,[e("span",{tooltip:"Editar",role:"button",onClick:y=>S(t)},[h(n(H),{size:"22"})],8,me)])]))),256))]),_:1})):m("",!0),h(j,{show:k.value,title:"Numero bloqueado",onOnCancel:C,onOnSubmit:$},{default:u(()=>[h(F,{text:"Numero",modelValue:n(c).number,"onUpdate:modelValue":r[4]||(r[4]=t=>n(c).number=t),type:"number",required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{Ne as default};
