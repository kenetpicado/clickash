import{_ as w}from"./BlockedNumber-4758cd85.js";import{_ as p}from"./InputForm-d9bf4b6c.js";import{_ as O}from"./SelectForm-f5c7d4c0.js";import{_ as B}from"./FormModal-5bb182d9.js";import{_ as D}from"./ClientareaLayout-8203113d.js";import{c as N}from"./helpers-85b5af26.js";import{t as c}from"./toast-58cfedeb.js";import{T as $,l as j,h as C,j as U,o as s,g as v,e as f,b as d,t as y,c as o,d as E,a as u,k,F as V,u as n,O as x}from"./app-be0400f8.js";import"./IconUser-2621c65e.js";const L={class:"title"},P={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},R=d("option",{value:"",selected:""},"Seleccione una rifa",-1),A=["value"],F={key:0,class:"w-full text-center text-gray-400"},z={key:1,class:"w-full text-center text-gray-400"},I={key:2,class:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4"},M={class:"grid grid-cols-2 gap-2"},T=d("p",{class:"text-primary"},[d("small",null," Nota: Recuerde ingresar el dígito con los ceros necesarios según la numeración de la rifa, por ejemplo, 01, 001, etc. De lo contrario, el bloqueo no se realizará correctamente. En cuanto a las fechas, utilice el formato dd/mm. ")],-1),ee={__name:"Index",props:{blockeds:{type:Object,required:!0},seller:{type:Object,required:!0},raffles:{type:Object,required:!0}},setup(i){const m=i,l=$({number:null,raffle_id:null,settings:{general_limit:null,individual_limit:null}}),g=j(!1),h=new URLSearchParams(window.location.search),a=C({raffle_id:h.get("raffle_id")||null}),S=()=>{if(!l.settings.general_limit&&!l.settings.individual_limit){c.error("Debe ingresar al menos un limite");return}if(m.blockeds.find(r=>r.number==l.number)){c.error("Digito ya bloqueado");return}l.raffle_id=a.raffle_id,l.post(route("clientarea.sellers.blocked-numbers.store",m.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),c.success("Agregado correctamente")}})},b=()=>{l.reset(),g.value=!1};U(()=>a,()=>{let r={...a};for(const t in r)r[t]||delete r[t];x.get(route("clientarea.sellers.blocked-numbers.index",m.seller.id),r,{preserveState:!0,only:["blockeds"],replace:!0})},{deep:!0});const q=r=>{N({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{x.delete(route("clientarea.sellers.blocked-numbers.destroy",[m.seller.id,r]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{c.success("Eliminado correctamente")}})}})};return(r,t)=>(s(),v(D,{title:"Bloqueados"},{header:f(()=>[d("span",L,y(i.seller.name)+": Bloqueados ",1),a.raffle_id?(s(),o("button",{key:0,type:"button",class:"simple-button",onClick:t[0]||(t[0]=_=>g.value=!0)}," Nuevo ")):E("",!0)]),default:f(()=>{var _;return[d("div",P,[u(O,{modelValue:a.raffle_id,"onUpdate:modelValue":t[1]||(t[1]=e=>a.raffle_id=e),text:"Rifa",required:""},{default:f(()=>[R,(s(!0),o(V,null,k(i.raffles,e=>(s(),o("option",{value:e.id},y(e.name),9,A))),256))]),_:1},8,["modelValue"])]),a.raffle_id?i.blockeds.length==0?(s(),o("div",z," No hay dígitos bloqueados 😥️ ")):(s(),o("div",I,[(s(!0),o(V,null,k(i.blockeds,e=>(s(),v(w,{digit:e,key:e.id,onDestroy:q},null,8,["digit"]))),128))])):(s(),o("div",F," Por favor seleccione una rifa ")),u(B,{show:g.value,title:(_=i.raffles.find(e=>a.raffle_id==e.id))==null?void 0:_.name,onOnCancel:b,onOnSubmit:S},{default:f(()=>[u(p,{text:"Dígito",modelValue:n(l).number,"onUpdate:modelValue":t[2]||(t[2]=e=>n(l).number=e),type:"number",required:""},null,8,["modelValue"]),d("div",M,[u(p,{text:"Limite individual",modelValue:n(l).settings.individual_limit,"onUpdate:modelValue":t[3]||(t[3]=e=>n(l).settings.individual_limit=e),type:"number"},null,8,["modelValue"]),u(p,{text:"Limite general",modelValue:n(l).settings.general_limit,"onUpdate:modelValue":t[4]||(t[4]=e=>n(l).settings.general_limit=e),type:"number"},null,8,["modelValue"])]),T]),_:1},8,["show","title"])]}),_:1}))}};export{ee as default};
