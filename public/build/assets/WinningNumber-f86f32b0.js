import{T as C}from"./TableSection-ff8fb781.js";import{T as N,r as B,j as F,g as S,o as s,c as n,b as e,F as h,h as p,a as f,f as _,t as a,u as r,d as y,e as v,k as V}from"./app-8e3fa869.js";import{_ as j}from"./FormModal-6b4dea58.js";import{_ as k}from"./InputForm-e5beccd3.js";import{_ as O}from"./SelectForm-4637e32e.js";import{C as u}from"./Carbon-e7b34390.js";import{t as g}from"./toast-9fbdbe11.js";import{c as w}from"./helpers-277f3b67.js";import"./_plugin-vue_export-helper-c27b6911.js";const H={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},M={class:"bg-white p-8 rounded-xl items-center flex justify-center border"},$={class:"text-center"},E={class:"text-2xl font-bold mb-2 badge-primary text-basic"},U={class:"text-center text-sm"},Y=e("th",null,"Vendedor",-1),z=e("th",null,"Cliente",-1),A=e("th",null,"Turno",-1),D=e("th",null,"Numero",-1),P=e("th",null,"Premio",-1),G=e("th",null,"Fecha",-1),L={class:"badge-primary whitespace-nowrap"},R={class:"font-semibold"},W={class:"text-sm"},I={key:0},J=e("td",{colspan:"6",class:"text-center"},"No hay datos",-1),K=[J],Q={class:"grid grid-cols-2 gap-2"},X=e("option",{value:"",disabled:"",selected:""},"Seleccione un turno",-1),Z=["value"],ee={key:0,class:"text-red-500 mb-4"},te={key:1,class:"text-gray-400 text-sm"},re={key:2,class:"mt-5 text-basic"},oe={class:"font-bold"},_e={__name:"WinningNumber",props:{results:{type:Object,required:!0},raffle:{type:Object,required:!0},openModal:{type:Boolean,required:!0},currentBlockedHours:{type:Object,required:!0},winners:{type:Object,required:!0},settings:{type:Object,required:!0}},emits:["update:openModal"],setup(l,{emit:T}){const c=l,o=N({number:null,hour:null}),m=B(null),b=F(()=>c.currentBlockedHours.length==0?[]:c.currentBlockedHours[0].blocked_hours),x=()=>{o.reset(),m.value=null,T("update:openModal",!1)},q=()=>{if(c.results.find(d=>d.hour==o.hour)){g.error("Ya existe un resultado para este turno");return}w({title:"Confirmar",message:"Â¿Esta seguro de agregar este resultado?",onConfirm:()=>{o.post(route("clientarea.raffles.winning-numbers.store",c.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{x(),g.success("Guardado correctamente")},onError:d=>{g.error(d.message)}})}})};return S(m,d=>{d?o.number=u.create(d).format("d-m"):o.number=null}),(d,i)=>(s(),n("div",null,[e("div",H,[(s(!0),n(h,null,p(l.results,t=>(s(),n("div",M,[e("div",$,[e("div",E,a(t.number),1),e("div",U,a(r(u).create().setTime(t.hour).getTimeFormat()),1)])]))),256))]),f(C,null,{header:_(()=>[Y,z,A,D,P,G]),body:_(()=>[(s(!0),n(h,null,p(l.winners,t=>(s(),n("tr",null,[e("td",null,a(t.user.name),1),e("td",null,a(t.client),1),e("td",null,[e("span",L,a(r(u).create().setTime(t.hour).getTimeFormat()),1)]),e("td",null,[e("span",R,a(t.digit),1)]),e("td",null,[e("span",W," C$"+a(t.prize),1)]),e("td",null,a(r(u).create(t.created_at).format("d/m/Y")),1)]))),256)),l.winners.length==0?(s(),n("tr",I,K)):y("",!0)]),_:1}),f(j,{show:l.openModal,title:"Resultado",onOnCancel:x,onOnSubmit:q},{default:_(()=>[e("div",Q,[f(O,{modelValue:r(o).hour,"onUpdate:modelValue":i[0]||(i[0]=t=>r(o).hour=t),text:"Turno",required:""},{default:_(()=>[X,(s(!0),n(h,null,p(b.value,t=>(s(),n("option",{value:t},a(r(u).create().setTime(t).getTimeFormat()),9,Z))),256))]),_:1},8,["modelValue"]),l.settings.date?(s(),v(k,{key:0,modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=t=>m.value=t),type:"date",text:"Fecha",required:""},null,8,["modelValue"])):(s(),v(k,{key:1,modelValue:r(o).number,"onUpdate:modelValue":i[2]||(i[2]=t=>r(o).number=t),type:"number",text:"Numero",required:""},null,8,["modelValue"]))]),b.value.length==0?(s(),n("div",ee,' No se encontraron turnos disponibles para el dia en curso. Por favor, verifique la disponibilidad en "Horario" ')):(s(),n("div",te," Verifique que los datos ingresados sean correctos antes de guardar, ya que para garantizar la integridad de los datos no se permite eliminar ni editar los resultados. ")),r(o).number&&r(o).hour?(s(),n("div",re,[V(" Agregando el numero ganador: "),e("span",oe,a(r(o).number),1),V(" a la rifa "+a(l.raffle.name)+" para el turno de las "+a(r(u).create().setTime(r(o).hour).getTimeFormat())+" del corriente dia: "+a(r(u).create().format("d/m/Y"))+". ",1)])):y("",!0)]),_:1},8,["show"])]))}};export{_e as default};
