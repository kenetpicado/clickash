import{_ as E,a as V}from"./Dropdown-49308a3a.js";import{_ as v}from"./InputForm-d9bf4b6c.js";import{_ as j}from"./SelectForm-f5c7d4c0.js";import{_ as w}from"./FormModal-5bb182d9.js";import{_ as R}from"./StatCard-e784fa0d.js";import{_ as T,I as f}from"./ClientareaLayout-8203113d.js";import{C as y}from"./Carbon-d935ed77.js";import{I as q,c as N}from"./helpers-85b5af26.js";import{t as g}from"./toast-58cfedeb.js";import{h as P,l as D,T as L,j as M,m as A,o as a,g as x,e as u,b as t,t as m,a as d,c as l,u as i,k as b,F as C,O as S}from"./app-be0400f8.js";import"./IconUser-2621c65e.js";import"./use-resolve-button-type-17e1e748.js";import"./IconList-69444146.js";const B={class:"title"},U={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},F={key:0,class:"mb-4"},Y={key:1,class:"mb-4"},G={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8"},H={class:"flex items-center justify-between mb-4 text-gray-600"},z=t("span",{class:"title"}," Movimientos ",-1),J={key:2,class:"text-center text-gray-400 mb-4"},K={key:3,class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},Q={class:"bg-card p-3 rounded-xl"},W={class:"flex items-center justify-between"},X={class:"text-gray-400 text-sm mb-2"},Z={class:"px-1 py-1"},ee={class:"flex items-center justify-between"},te={class:"text-sm text-gray-600 font-bold"},se={class:"text-xl text-gray-600 font-bold"},ae=t("option",{value:"RETIRO"},"RETIRO",-1),oe=t("option",{value:"DEPOSITO"},"DEPOSITO",-1),ye={__name:"Index",props:{cashbox:{type:Object,required:!0},seller:{type:Object,required:!0},archings:{type:Object,required:!0}},setup(p){const o=p,O=new URLSearchParams(window.location.search),c=P({date:O.get("date")??""}),_=D(!1),r=L({id:null,type:"RETIRO",amount:null});M(()=>c,()=>{let n={...c};for(const s in n)n[s]||delete n[s];S.get(route("clientarea.sellers.archings.index",o.seller.id),n,{preserveState:!0,preserveScroll:!0,only:["cashbox","archings"],replace:!0})},{deep:!0});const k=A(()=>[{title:"Ingresos",value:"C$ "+o.cashbox.income.toLocaleString(),icon:f},{title:"Egresos",value:"C$ "+o.cashbox.expenditure.toLocaleString(),icon:f},{title:o.cashbox.revenue>=0?"Ganancias":"Perdidas",value:"C$ "+o.cashbox.revenue.toLocaleString(),icon:f}]);function h(){r.reset(),_.value=!1}function I(){if(r.type=="RETIRO"&&r.amount>o.cashbox.revenue){g.error("No puede retirar más de lo que tiene");return}r.post(route("clientarea.sellers.archings.store",o.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h(),g.success("Movimiento agregado")}})}function $(n){N({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{S.delete(route("clientarea.sellers.archings.destroy",[o.seller.id,n]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g.success("Eliminado correctamente")}})}})}return(n,s)=>(a(),x(T,{title:"Caja"},{header:u(()=>[t("span",B," Caja: "+m(p.seller.name),1)]),default:u(()=>[t("div",U,[d(v,{modelValue:c.date,"onUpdate:modelValue":s[0]||(s[0]=e=>c.date=e),text:"Fecha",type:"date"},null,8,["modelValue"])]),c.date?(a(),l("h2",Y,"Caja del DIA "+m(i(y).create(c.date).format("d/m/Y")),1)):(a(),l("h2",F,"Caja de la SEMANA en curso")),t("div",G,[(a(!0),l(C,null,b(k.value,e=>(a(),x(R,{stat:e,key:e.title},null,8,["stat"]))),128))]),t("div",H,[z,t("button",{onClick:s[1]||(s[1]=e=>_.value=!0),type:"button",class:"simple-button"}," Nuevo ")]),p.archings.data.length==0?(a(),l("div",J," No hay movimientos ")):(a(),l("div",K,[(a(!0),l(C,null,b(p.archings.data,e=>(a(),l("div",Q,[t("div",W,[t("div",X,m(i(y).create(e.created_at).format("d/m/Y H:i")),1),d(V,null,{default:u(()=>[t("div",Z,[d(E,{onClick:re=>$(e.id),title:"Eliminar",icon:i(q)},null,8,["onClick","icon"])])]),_:2},1024)]),t("div",ee,[t("span",te,m(e.type),1),t("span",se," C$"+m(e.amount),1)])]))),256))])),d(w,{show:_.value,title:"Movimiento",onOnCancel:h,onOnSubmit:I},{default:u(()=>[d(j,{modelValue:i(r).type,"onUpdate:modelValue":s[2]||(s[2]=e=>i(r).type=e),text:"Tipo",required:""},{default:u(()=>[ae,oe]),_:1},8,["modelValue"]),d(v,{modelValue:i(r).amount,"onUpdate:modelValue":s[3]||(s[3]=e=>i(r).amount=e),type:"number",text:"Cantidad",required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{ye as default};
