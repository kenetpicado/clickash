import{_ as E}from"./AddButton-1f8d14a7.js";import{_ as p,a as N}from"./Dropdown-c80ee868.js";import{_ as i}from"./InputForm-93a35565.js";import{_ as S}from"./SelectForm-2cfdac77.js";import{_ as j}from"./FormModal-9adca857.js";import{T as B,l as g,o as u,g as w,e as n,a as l,b as _,c as d,k as U,u as s,F as f,d as k,t as $}from"./app-c1c8f147.js";import{t as x}from"./toast-dccbd889.js";import{c as A,I as F}from"./helpers-a664006f.js";import{_ as P}from"./AppLayout-3cf2b988.js";import{_ as R}from"./JsonContent-af4b1aa7.js";import{I as T}from"./IconUser-09d5138b.js";import{I as G}from"./IconUsers-2f3a85ce.js";import{I as L}from"./IconEdit-41b92be1.js";import"./use-resolve-button-type-bb2162a8.js";import"./IconList-8737aff1.js";function M(){const a=B({id:"",name:"",email:"",password:"",password_confirmation:"",sellers_limit:5,company_name:"",role:"owner",status:"enabled"});function V(t=null){a.post(route("dashboard.users.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{x.success("User created successfully"),t&&t()}})}function v(t=null){a.put(route("dashboard.users.update",a.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{x.success("User updated successfully"),t&&t()}})}function y(t){A({message:"Are you sure you want to delete this user?",onConfirm:()=>{a.delete(route("dashboard.users.destroy",t),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{x.success("User deleted successfully")}})}})}return{form:a,store:V,update:v,destroy:y}}const z=_("span",{class:"title"}," Usuarios ",-1),H={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},J={class:"px-1 py-1"},K={class:"px-1 py-1"},Q=["value"],W=["value"],me={__name:"Index",props:{users:{type:Object,required:!0},roles:{type:Object,required:!0},statuses:{type:Object,required:!0}},setup(a){const{destroy:V,store:v,update:y,form:t}=M(),C=[{name:"Inicio",route:route("dashboard.index")},{name:"Usuarios",route:route("dashboard.users.index")}],m=g(!0),c=g(!1);function I(r){Object.assign(t,r),m.value=!1,c.value=!0}function q(){m.value?v(b):y(b)}const b=()=>{t.reset(),c.value=!1,m.value=!0};function h(r){return delete r.email_verified_at,delete r.user_id,delete r.created_at,delete r.updated_at,delete r.last_login,delete r.deleted_at,r}return(r,o)=>(u(),w(P,{title:"Usuarios",breads:C},{header:n(()=>[z,l(E,{onClick:o[0]||(o[0]=e=>c.value=!0)})]),default:n(()=>[_("div",H,[(u(!0),d(f,null,U(a.users,e=>(u(),w(R,{title:e.name,content:h(e)},{default:n(()=>[l(N,null,{default:n(()=>[_("div",J,[l(p,{href:r.route("dashboard.users.show",e.id),title:"Rifas",icon:s(T)},null,8,["href","icon"]),l(p,{href:r.route("dashboard.users.sellers",e.id),title:"Vendedores",icon:s(G)},null,8,["href","icon"])]),_("div",K,[l(p,{onClick:O=>I(e),title:"Editar",icon:s(L)},null,8,["onClick","icon"]),l(p,{onClick:O=>s(V)(e.id),title:"Eliminar",icon:s(F)},null,8,["onClick","icon"])])]),_:2},1024)]),_:2},1032,["title","content"]))),256))]),l(j,{show:c.value,title:"Usuario",onOnCancel:b,onOnSubmit:q},{default:n(()=>[l(i,{text:"Name",modelValue:s(t).name,"onUpdate:modelValue":o[1]||(o[1]=e=>s(t).name=e),required:""},null,8,["modelValue"]),l(i,{text:"Email",modelValue:s(t).email,"onUpdate:modelValue":o[2]||(o[2]=e=>s(t).email=e),type:"email",required:""},null,8,["modelValue"]),l(i,{text:"Company name",modelValue:s(t).company_name,"onUpdate:modelValue":o[3]||(o[3]=e=>s(t).company_name=e),required:""},null,8,["modelValue"]),m.value?(u(),d(f,{key:0},[l(i,{text:"Password",modelValue:s(t).password,"onUpdate:modelValue":o[4]||(o[4]=e=>s(t).password=e),type:"password",required:""},null,8,["modelValue"]),l(i,{text:"Password confirmation",modelValue:s(t).password_confirmation,"onUpdate:modelValue":o[5]||(o[5]=e=>s(t).password_confirmation=e),type:"password",required:""},null,8,["modelValue"])],64)):k("",!0),l(i,{text:"Sellers limit",modelValue:s(t).sellers_limit,"onUpdate:modelValue":o[6]||(o[6]=e=>s(t).sellers_limit=e),type:"number"},null,8,["modelValue"]),l(S,{modelValue:s(t).role,"onUpdate:modelValue":o[7]||(o[7]=e=>s(t).role=e),text:"Role"},{default:n(()=>[(u(!0),d(f,null,U(a.roles,e=>(u(),d("option",{value:e},$(e),9,Q))),256))]),_:1},8,["modelValue"]),m.value?k("",!0):(u(),w(S,{key:1,modelValue:s(t).status,"onUpdate:modelValue":o[8]||(o[8]=e=>s(t).status=e),text:"Status"},{default:n(()=>[(u(!0),d(f,null,U(a.statuses,e=>(u(),d("option",{value:e},$(e),9,W))),256))]),_:1},8,["modelValue"]))]),_:1},8,["show"])]),_:1}))}};export{me as default};
