import{_ as j}from"./AddButton-177a888f.js";import{_ as p,a as A}from"./DropdownItem-84b3e997.js";import{_ as i}from"./InputForm-e16abf03.js";import{_ as C}from"./SelectForm-be8d82df.js";import{_ as B}from"./FormModal-b27e4063.js";import{T as F,l as S,o as r,j as f,e as u,a as s,b as d,c as _,k as U,u as o,d as x,F as v,t as I}from"./app-3bfb5daa.js";import{t as k}from"./toast-002aa171.js";import{c as R,I as T}from"./helpers-d94be918.js";import{_ as G}from"./AppLayout-5ddb7563.js";import{_ as L}from"./JsonContent-a20cecc7.js";import{I as M}from"./IconUser-8d980923.js";import{I as P}from"./IconUsers-7a84134d.js";import{I as z}from"./IconEdit-8f225f4e.js";import"./IconList-caffa855.js";import"./use-resolve-button-type-37e33f60.js";function H(){const n=F({id:"",name:"",email:"",password:"",password_confirmation:"",sellers_limit:5,company_name:"",role:"owner",status:"enabled"});function V(t=null){n.post(route("dashboard.users.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{k.success("User created successfully"),t&&t()}})}function y(t=null){n.put(route("dashboard.users.update",n.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{k.success("User updated successfully"),t&&t()}})}function w(t){R({message:"Are you sure you want to delete this user?",onConfirm:()=>{n.delete(route("dashboard.users.destroy",t),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{k.success("User deleted successfully")}})}})}return{form:n,store:V,update:y,destroy:w}}const J=d("span",{class:"title"}," Usuarios ",-1),K={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Q={class:"px-1 py-1"},W={class:"px-1 py-1"},X=["value"],Y=["value"],pe={__name:"Index",props:{users:{type:Object,required:!0},roles:{type:Object,required:!0}},setup(n){const{destroy:V,store:y,update:w,form:t}=H(),$=[{name:"Activo",value:"enabled"},{name:"Inactivo",value:"disabled"}],g=[{name:"Administrador",value:"root"},{name:"Propietario",value:"owner"}],h=[{name:"Inicio",route:route("dashboard.index")},{name:"Usuarios",route:window.location.href}],m=S(!0),c=S(!1);function q(l){Object.assign(t,l),m.value=!1,c.value=!0}function E(){m.value?y(b):w(b)}const b=()=>{t.reset(),c.value=!1,m.value=!0};function N(l){return delete l.email_verified_at,delete l.user_id,delete l.created_at,delete l.updated_at,delete l.last_login,delete l.deleted_at,l}return(l,a)=>(r(),f(G,{title:"Usuarios",breads:h},{header:u(()=>[J,s(j,{onClick:a[0]||(a[0]=e=>c.value=!0)})]),default:u(()=>[d("div",K,[(r(!0),_(v,null,U(n.users,e=>(r(),f(L,{title:e.name,content:N(e)},{default:u(()=>[s(A,null,{default:u(()=>[d("div",Q,[s(p,{href:l.route("dashboard.users.show",e.id),title:"Rifas",icon:o(M)},null,8,["href","icon"]),s(p,{href:l.route("dashboard.users.sellers",e.id),title:"Vendedores",icon:o(P)},null,8,["href","icon"])]),d("div",W,[s(p,{onClick:O=>q(e),title:"Editar",icon:o(z)},null,8,["onClick","icon"]),e.role!="root"?(r(),f(p,{key:0,onClick:O=>o(V)(e.id),title:"Eliminar",icon:o(T)},null,8,["onClick","icon"])):x("",!0)])]),_:2},1024)]),_:2},1032,["title","content"]))),256))]),s(B,{show:c.value,title:"Usuario",onOnCancel:b,onOnSubmit:E},{default:u(()=>[s(i,{text:"Nombre",name:"name",modelValue:o(t).name,"onUpdate:modelValue":a[1]||(a[1]=e=>o(t).name=e),required:""},null,8,["modelValue"]),s(i,{text:"Correo",name:"email",modelValue:o(t).email,"onUpdate:modelValue":a[2]||(a[2]=e=>o(t).email=e),type:"email",required:""},null,8,["modelValue"]),s(i,{text:"Empresa",name:"company_name",modelValue:o(t).company_name,"onUpdate:modelValue":a[3]||(a[3]=e=>o(t).company_name=e),required:""},null,8,["modelValue"]),m.value?(r(),_(v,{key:0},[s(i,{text:"Contraseña",modelValue:o(t).password,"onUpdate:modelValue":a[4]||(a[4]=e=>o(t).password=e),name:"password",type:"password",required:""},null,8,["modelValue"]),s(i,{text:"Confirmar contraseña",modelValue:o(t).password_confirmation,"onUpdate:modelValue":a[5]||(a[5]=e=>o(t).password_confirmation=e),name:"password_confimation",type:"password",required:""},null,8,["modelValue"])],64)):x("",!0),s(i,{text:"Vendedores",modelValue:o(t).sellers_limit,"onUpdate:modelValue":a[6]||(a[6]=e=>o(t).sellers_limit=e),type:"number",name:"sellers_limit"},null,8,["modelValue"]),s(C,{modelValue:o(t).role,"onUpdate:modelValue":a[7]||(a[7]=e=>o(t).role=e),text:"Role"},{default:u(()=>[(r(),_(v,null,U(g,e=>d("option",{value:e.value},I(e.name),9,X)),64))]),_:1},8,["modelValue"]),m.value?x("",!0):(r(),f(C,{key:1,modelValue:o(t).status,"onUpdate:modelValue":a[8]||(a[8]=e=>o(t).status=e),text:"Estado",name:"status"},{default:u(()=>[(r(),_(v,null,U($,e=>d("option",{value:e.value},I(e.name),9,Y)),64))]),_:1},8,["modelValue"]))]),_:1},8,["show"])]),_:1}))}};export{pe as default};
