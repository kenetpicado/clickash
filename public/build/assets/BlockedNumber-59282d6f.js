import{_ as c}from"./InputForm-ce418447.js";import{_ as y}from"./FormModal-7cc69321.js";import{T as k}from"./TableSection-95d12439.js";import{c as v}from"./helpers-7c78a5c5.js";import{t as u}from"./toast-acdf87cd.js";import{T as V,o as l,c as n,a as r,f as _,F as N,h as S,b as t,t as p,u as i,d as C,O as q}from"./app-7c5cc7f0.js";import{I as x}from"./IconTrash-72bf6c52.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./createVueComponent-565fb9f0.js";const B=t("th",null,"Limite individual",-1),O=t("th",null,"Limite general",-1),E=t("th",null,"Numero",-1),L=t("th",null,"Acciones",-1),$={key:0,class:"badge-red"},M={key:1},T={key:0,class:"badge-red"},w={key:1},U={class:"badge-blue"},j=["onClick"],A={key:0},D=t("td",{colspan:"4",class:"text-center"},"No hay datos",-1),F=[D],I={class:"grid grid-cols-2 gap-2"},Y={__name:"BlockedNumber",props:{raffle:{type:Object,required:!0},blockeds:{type:Object,required:!0},openModal:{type:Boolean,required:!0}},emits:["update:openModal"],setup(a,{emit:f}){const m=a,o=V({number:null,settings:{general_limit:null,individual_limit:null}}),b=()=>{if(!o.settings.general_limit&&!o.settings.individual_limit){u.error("Debe ingresar al menos un limite");return}if(m.blockeds.find(d=>d.number==o.number)){u.error("Numero ya bloqueado");return}o.post(route("clientarea.raffles.blocked-numbers.store",m.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g(),u.success("Numero bloqueado")}})},g=()=>{o.reset(),f("update:openModal",!1)},h=d=>{v({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{q.delete(route("clientarea.raffles.blocked-numbers.destroy",[m.raffle.id,d]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{u.success("Eliminado correctamente")},onError:s=>{console.log(s)}})}})};return(d,s)=>(l(),n("div",null,[r(k,null,{header:_(()=>[B,O,E,L]),body:_(()=>[(l(!0),n(N,null,S(a.blockeds,e=>(l(),n("tr",null,[t("td",null,[e.settings.individual_limit?(l(),n("span",$," C$"+p(e.settings.individual_limit),1)):(l(),n("span",M," Ninguno "))]),t("td",null,[e.settings.general_limit?(l(),n("span",T," C$"+p(e.settings.general_limit),1)):(l(),n("span",w," Ninguno "))]),t("td",null,[t("span",U,p(e.number),1)]),t("td",null,[t("span",{tooltip:"Eliminar",role:"button",onClick:z=>h(e.id)},[r(i(x),{size:"22"})],8,j)])]))),256)),a.blockeds.length==0?(l(),n("tr",A,F)):C("",!0)]),_:1}),r(y,{show:a.openModal,title:"Bloquear",onOnCancel:g,onOnSubmit:b},{default:_(()=>[r(c,{text:"Numero",modelValue:i(o).number,"onUpdate:modelValue":s[0]||(s[0]=e=>i(o).number=e),type:"number",required:""},null,8,["modelValue"]),t("div",I,[r(c,{text:"Limite individual",modelValue:i(o).settings.individual_limit,"onUpdate:modelValue":s[1]||(s[1]=e=>i(o).settings.individual_limit=e),type:"number"},null,8,["modelValue"]),r(c,{text:"Limite general",modelValue:i(o).settings.general_limit,"onUpdate:modelValue":s[2]||(s[2]=e=>i(o).settings.general_limit=e),type:"number"},null,8,["modelValue"])])]),_:1},8,["show"])]))}};export{Y as default};
