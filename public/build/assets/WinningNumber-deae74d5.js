import{T as y}from"./TableSection-95d12439.js";import{T as V,j as q,o as r,c as o,b as e,F as h,h as p,a as c,f as m,t as s,u as n,d as T}from"./app-7c5cc7f0.js";import{_ as k}from"./FormModal-7cc69321.js";import{_ as C}from"./InputForm-ce418447.js";import{_ as N}from"./SelectForm-2c077a5d.js";import{C as _}from"./Carbon-e7b34390.js";import{t as f}from"./toast-acdf87cd.js";import{c as S}from"./helpers-7c78a5c5.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},j={class:"bg-white p-8 rounded-xl items-center flex justify-center border"},F={class:"text-center"},O={class:"text-2xl font-bold mb-2 badge-blue"},w={class:"text-center text-sm"},H=e("th",null,"Vendedor",-1),M=e("th",null,"Cliente",-1),$=e("th",null,"Turno",-1),E=e("th",null,"Numero",-1),z=e("th",null,"Premio",-1),P=e("th",null,"Fecha",-1),U={class:"badge-blue whitespace-nowrap"},Y={class:"font-semibold"},A={class:"badge-red text-sm"},D={key:0},G=e("td",{colspan:"6",class:"text-center"},"No hay datos",-1),L=[G],R={class:"grid grid-cols-2 gap-2"},W=e("option",{value:"",disabled:"",selected:""},"Seleccione un turno",-1),I=["value"],J={key:0,class:"text-red-500 mb-4"},K={key:1,class:"text-gray-400"},ae={__name:"WinningNumber",props:{results:{type:Object,required:!0},raffle:{type:Object,required:!0},openModal:{type:Boolean,required:!0},currentBlockedHours:{type:Object,required:!0},winners:{type:Object,required:!0}},emits:["update:openModal"],setup(l,{emit:v}){const d=l,a=V({number:null,hour:null}),g=q(()=>d.currentBlockedHours.length==0?[]:d.currentBlockedHours[0].blocked_hours),b=()=>{a.reset(),v("update:openModal",!1)},x=()=>{if(d.results.find(u=>u.hour==a.hour)){f.error("Ya existe un resultado para este turno");return}S({title:"Confirmar",message:"Â¿Esta seguro de agregar este resultado?",onConfirm:()=>{a.post(route("clientarea.raffles.winning-numbers.store",d.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),f.success("Guardado correctamente")},onError:u=>{f.error(u.message)}})}})};return(u,i)=>(r(),o("div",null,[e("div",B,[(r(!0),o(h,null,p(l.results,t=>(r(),o("div",j,[e("div",F,[e("div",O,s(t.number),1),e("div",w,s(n(_).create().setTime(t.hour).getTimeFormat()),1)])]))),256))]),c(y,null,{header:m(()=>[H,M,$,E,z,P]),body:m(()=>[(r(!0),o(h,null,p(l.winners,t=>(r(),o("tr",null,[e("td",null,s(t.user.name),1),e("td",null,s(t.client),1),e("td",null,[e("span",U,s(n(_).create().setTime(t.hour).getTimeFormat()),1)]),e("td",null,[e("span",Y,s(t.digit),1)]),e("td",null,[e("span",A," C$"+s(t.prize),1)]),e("td",null,s(n(_).create(t.created_at).format("d/m/Y")),1)]))),256)),l.winners.length==0?(r(),o("tr",D,L)):T("",!0)]),_:1}),c(k,{show:l.openModal,title:"Resultado",onOnCancel:b,onOnSubmit:x},{default:m(()=>[e("div",R,[c(N,{modelValue:n(a).hour,"onUpdate:modelValue":i[0]||(i[0]=t=>n(a).hour=t),text:"Turno",required:""},{default:m(()=>[W,(r(!0),o(h,null,p(g.value,t=>(r(),o("option",{value:t},s(n(_).create().setTime(t).getTimeFormat()),9,I))),256))]),_:1},8,["modelValue"]),c(C,{modelValue:n(a).number,"onUpdate:modelValue":i[1]||(i[1]=t=>n(a).number=t),type:"number",text:"Numero",required:""},null,8,["modelValue"])]),g.value.length==0?(r(),o("div",J,' No se encontraron turnos disponibles para el dia en curso. Por favor, verifique la disponibilidad en "Horario" ')):(r(),o("div",K," Verifique que los datos ingresados sean correctos antes de guardar, ya que para garantizar la integridad de los datos no se permite eliminar ni editar los resultados. "))]),_:1},8,["show"])]))}};export{ae as default};
