import{_ as M}from"./AddButton-9515ba0a.js";import{_ as V,a as O}from"./Dropdown-49308a3a.js";import{_ as x}from"./Checkbox-bbe27916.js";import{_ as o}from"./InputForm-d9bf4b6c.js";import{_ as C}from"./FormModal-5bb182d9.js";import{T as q,l as _,j as L,o as g,g as k,e as m,a as i,b as c,c as b,k as B,u as l,F as j,d as y}from"./app-be0400f8.js";import{t as u}from"./toast-58cfedeb.js";import{_ as E}from"./AppLayout-4ab3b931.js";import{_ as F}from"./JsonContent-2b595b95.js";import{c as T}from"./IconUser-2621c65e.js";import{I as z}from"./IconEdit-e85f85eb.js";import"./use-resolve-button-type-17e1e748.js";import"./IconList-69444146.js";import"./IconUsers-8a7495e8.js";var G=T("copy","IconCopy",[["path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2",key:"svg-1"}]]);function X(){const a=q({id:"",name:"",image:"",settings:{min:null,max:null,date:!1,super_x:!1,general_limit:null,individual_limit:null,multiplier:70}});function v(n=null){a.post(route("dashboard.raffles.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{u.success("Raffle created successfully"),n&&n()}})}function d(n=null){a.put(route("dashboard.raffles.update",a.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{u.success("Raffle updated successfully"),n&&n()}})}function f(n=null){a.put(route("dashboard.raffles.clone",a.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{u.success("Rifa clonada con éxito"),n&&n()}})}return{form:a,store:v,update:d,clone:f}}const A=c("span",{class:"title"}," Rifa ",-1),H={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},J={class:"px-1 py-1"},K={key:0,class:"w-40 h-40 overflow-hidden mb-6"},P=["src"],Q={class:"grid grid-cols-2 gap-4"},W={class:"grid grid-cols-2 gap-4 mb-1"},Y={key:1,class:"grid grid-cols-2 gap-4"},ce={__name:"Index",props:{raffles:{type:Object,required:!0}},setup(a){const v=[{name:"Inicio",route:route("dashboard.index")},{name:"Rifas",route:route("dashboard.raffles.index")}],d=_(!1),f=_(!1),n=_(!0),{store:N,update:h,form:e,clone:S}=X();function $(r){Object.assign(e,r),d.value=!0,n.value=!1}L(()=>e.settings.date,r=>{r&&(e.settings.min=null,e.settings.max=null)});function w(){if(isNaN(e.settings.min)){u.error("Min must be a number");return}if(isNaN(e.settings.max)){u.error("Max must be a number");return}if(isNaN(e.settings.general_limit)){u.error("General Limit must be a number");return}if(isNaN(e.settings.individual_limit)){u.error("Individual Limit must be a number");return}n.value?N(p):h(p)}const p=()=>{e.reset(),d.value=!1,f.value=!1,n.value=!0};function U(r){e.id=r.id,e.name=r.name+" (Copia)",f.value=!0}function I(){S(p)}return(r,s)=>(g(),k(E,{title:"Rifa",breads:v},{header:m(()=>[A,i(M,{onClick:s[0]||(s[0]=t=>d.value=!0)})]),default:m(()=>[c("div",H,[(g(!0),b(j,null,B(a.raffles,t=>(g(),k(F,{title:t.name,content:t.settings},{default:m(()=>[i(O,null,{default:m(()=>[c("div",J,[i(V,{onClick:R=>U(t),title:"Clonar",icon:l(G)},null,8,["onClick","icon"]),i(V,{onClick:R=>$(t),title:"Editar",icon:l(z)},null,8,["onClick","icon"])])]),_:2},1024)]),_:2},1032,["title","content"]))),256))]),i(C,{show:d.value,title:"Rifa",onOnCancel:p,onOnSubmit:w},{default:m(()=>[i(o,{text:"Nombre",modelValue:l(e).name,"onUpdate:modelValue":s[1]||(s[1]=t=>l(e).name=t)},null,8,["modelValue"]),i(o,{text:"Imagen",modelValue:l(e).image,"onUpdate:modelValue":s[2]||(s[2]=t=>l(e).image=t),type:"url"},null,8,["modelValue"]),l(e).image?(g(),b("div",K,[c("img",{src:l(e).image,alt:"",class:"w-full h-full"},null,8,P)])):y("",!0),c("div",Q,[i(o,{text:"Limite general C$",modelValue:l(e).settings.general_limit,"onUpdate:modelValue":s[3]||(s[3]=t=>l(e).settings.general_limit=t),type:"number"},null,8,["modelValue"]),i(o,{text:"Limite indiv. C$",modelValue:l(e).settings.individual_limit,"onUpdate:modelValue":s[4]||(s[4]=t=>l(e).settings.individual_limit=t),type:"number"},null,8,["modelValue"])]),c("div",W,[i(x,{checked:l(e).settings.super_x,"onUpdate:checked":s[5]||(s[5]=t=>l(e).settings.super_x=t),text:"Super X"},null,8,["checked"]),i(x,{checked:l(e).settings.date,"onUpdate:checked":s[6]||(s[6]=t=>l(e).settings.date=t),text:"Fecha"},null,8,["checked"])]),l(e).settings.date?y("",!0):(g(),b("div",Y,[i(o,{text:"Número inicio",modelValue:l(e).settings.min,"onUpdate:modelValue":s[7]||(s[7]=t=>l(e).settings.min=t),required:"",type:"number"},null,8,["modelValue"]),i(o,{text:"Número final",modelValue:l(e).settings.max,"onUpdate:modelValue":s[8]||(s[8]=t=>l(e).settings.max=t),required:"",type:"number"},null,8,["modelValue"])])),i(o,{text:"Multiplicador",modelValue:l(e).settings.multiplier,"onUpdate:modelValue":s[9]||(s[9]=t=>l(e).settings.multiplier=t),type:"number",required:""},null,8,["modelValue"])]),_:1},8,["show"]),i(C,{show:f.value,title:"Clonar",onOnCancel:p,onOnSubmit:I},{default:m(()=>[i(o,{text:"Nuevo nombre",modelValue:l(e).name,"onUpdate:modelValue":s[10]||(s[10]=t=>l(e).name=t),required:""},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}))}};export{ce as default};
