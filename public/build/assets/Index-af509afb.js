import{_ as O}from"./BlockedNumber-03ea67de.js";import{_}from"./InputForm-acb6448b.js";import{_ as B}from"./SelectForm-a04db689.js";import{_ as $}from"./FormModal-1f80bf37.js";import{_ as j}from"./ClientareaLayout-901333af.js";import{c as C}from"./helpers-773bde8e.js";import{t as b}from"./toast-b46a3799.js";import{T as N,r as U,h as E,j as L,o as s,k as x,f as m,d,t as v,c as o,e as D,b as u,l as y,F as c,u as n,O as S}from"./app-ae25cce0.js";import"./Modal-38595fb6.js";import"./IconUser-0a386455.js";const P={class:"title"},A={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 text-gray-600"},F=d("option",{value:"",selected:""},"Seleccione una rifa",-1),R=["value"],I={key:0,class:"w-full text-center text-gray-400"},M={class:"text-xl font-bold mb-2 text-gray-600"},T={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4 w-full"},z={class:"grid grid-cols-2 gap-2"},te={__name:"Index",props:{blockeds:{type:Object,required:!0},seller:{type:Object,required:!0},raffles:{type:Object,required:!0}},setup(i){const f=i,l=N({number:null,raffle_id:null,settings:{general_limit:null,individual_limit:null}}),g=U(!1),h=new URLSearchParams(window.location.search),a=E({raffle_id:h.get("raffle_id")||null}),q=()=>{l.raffle_id=a.raffle_id,l.post(route("clientarea.sellers.blocked-numbers.store",f.seller.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{k(),b.success("Agregado correctamente")},onError:r=>{b.error(r.message)}})},k=()=>{l.reset(),g.value=!1};L(()=>a,()=>{let r={...a};for(const t in r)r[t]||delete r[t];S.get(route("clientarea.sellers.blocked-numbers.index",f.seller.id),r,{preserveState:!0,only:["blockeds"],replace:!0})},{deep:!0});const w=r=>{C({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{S.delete(route("clientarea.sellers.blocked-numbers.destroy",[f.seller.id,r]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b.success("Eliminado correctamente")}})}})};return(r,t)=>(s(),x(j,{title:"Bloqueados"},{header:m(()=>[d("span",P,v(i.seller.name)+": Bloqueados ",1),a.raffle_id?(s(),o("button",{key:0,type:"button",class:"simple-button",onClick:t[0]||(t[0]=p=>g.value=!0)}," Nuevo ")):D("",!0)]),default:m(()=>{var p;return[d("div",A,[u(B,{modelValue:a.raffle_id,"onUpdate:modelValue":t[1]||(t[1]=e=>a.raffle_id=e),text:"Rifa",required:""},{default:m(()=>[F,(s(!0),o(c,null,y(i.raffles,e=>(s(),o("option",{value:e.id},v(e.name),9,R))),256))]),_:1},8,["modelValue"])]),i.blockeds.length==0?(s(),o("div",I," No hay dígitos bloqueados 😥️ ")):(s(!0),o(c,{key:1},y(Object.groupBy(i.blockeds,({raffle:e})=>e.name),e=>(s(),o(c,null,[d("h2",M,v(e[0].raffle.name),1),d("div",T,[(s(!0),o(c,null,y(e,V=>(s(),x(O,{digit:V,key:V.id,onDestroy:w},null,8,["digit"]))),128))])],64))),256)),u($,{show:g.value,title:(p=i.raffles.find(e=>a.raffle_id==e.id))==null?void 0:p.name,onOnCancel:k,onOnSubmit:q},{default:m(()=>[u(_,{text:"Dígito",modelValue:n(l).number,"onUpdate:modelValue":t[2]||(t[2]=e=>n(l).number=e),required:""},null,8,["modelValue"]),d("div",z,[u(_,{text:"Limite individual",modelValue:n(l).settings.individual_limit,"onUpdate:modelValue":t[3]||(t[3]=e=>n(l).settings.individual_limit=e),type:"number"},null,8,["modelValue"]),u(_,{text:"Limite general",modelValue:n(l).settings.general_limit,"onUpdate:modelValue":t[4]||(t[4]=e=>n(l).settings.general_limit=e),type:"number"},null,8,["modelValue"])])]),_:1},8,["show","title"])]}),_:1}))}};export{te as default};
