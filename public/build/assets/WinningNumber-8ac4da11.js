import{a as w,_ as T}from"./Dropdown-6e8150d4.js";import{_ as y}from"./InputForm-ef68cc6a.js";import{_ as N}from"./SelectForm-4cdc50bd.js";import{_ as j}from"./FormModal-d1b8486c.js";import{o as r,c as l,b as o,t as u,m as O,r as x,T as E,k as F,g as B,j as m,e as c,F as k,h as V,a as h,u as s,f as C,d as I}from"./app-f92a6350.js";import{_ as A}from"./ClientareaLayout-b5ae82d4.js";import{C as f}from"./Carbon-e7b34390.js";import{c as $,I as D}from"./helpers-38f2496b.js";import{t as _}from"./toast-c1861280.js";import{c as G}from"./createVueComponent-0e3384b4.js";import"./IconList-a114a6b9.js";import"./_plugin-vue_export-helper-c27b6911.js";var U=G("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);const M={class:"bg-card h-20 rounded-xl"},Y={class:"flex h-full items-center justify-between p-4"},z={class:"text-gray-600"},H={class:"font-bold text-lg"},L={class:"text-sm"},P={__name:"StatCardActions",props:{stat:{type:Object,required:!0}},setup(i){return(d,p)=>(r(),l("div",M,[o("div",Y,[o("div",z,[o("div",H,u(i.stat.value),1),o("div",L,u(i.stat.title),1)]),o("div",null,[O(d.$slots,"default")])])]))}},R=o("span",{class:"title"}," Ganadores ",-1),W={key:0,class:"w-full text-center text-gray-400 mb-4"},J={key:1,class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},K={class:"px-1 py-1"},Q={key:0,class:"text-red-500 mb-4"},X=o("option",{value:"",disabled:"",selected:""},"Seleccione un turno",-1),Z=["value"],ee=o("div",{class:"text-gray-400 text-sm"}," Verifique que los datos ingresados sean correctos antes de guardar, ya que para garantizar la integridad de los datos no se permite eliminar ni editar los resultados. ",-1),te={key:4,class:"mt-5 text-basic"},re={class:"font-bold"},ge={__name:"WinningNumber",props:{winning_numbers:{type:Object,required:!0},hours:{type:Object,required:!0},settings:{type:Object,required:!0},raffle:{type:Object,required:!0}},setup(i){const d=i,p=x(!1),g=x(""),e=E({number:null,hour:null}),v=F(()=>d.winning_numbers.map(a=>({id:a.id,title:"Turno: "+f.create().setTime(a.hour).getTimeFormat(),value:"Dígito: "+a.number,icon:U})));function b(){e.reset(),p.value=!1}B(()=>g.value,a=>{a?e.number=f.create(a).format("d/m"):e.number=null});const q=()=>{if(d.winning_numbers.find(a=>a.hour==e.hour)){_.error("Ya existe un resultado para este turno");return}$({title:"Confirmar",message:"¿Esta seguro de agregar este resultado?",onConfirm:()=>{e.post(route("clientarea.raffles.winning-numbers.store",d.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),_.success("Guardado correctamente")}})}})};function S(a){$({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{e.delete(route("clientarea.raffles.winning-numbers.destroy",[d.raffle.id,a]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),_.success("Eliminado correctamente")},onError:n=>{_.error(n.message)}})}})}return(a,n)=>(r(),m(A,{title:"Ganadores"},{header:c(()=>[R,o("button",{type:"button",class:"simple-button",onClick:n[0]||(n[0]=t=>p.value=!0)}," Nuevo ")]),default:c(()=>[v.value.length==0?(r(),l("div",W," No hay resultados ")):(r(),l("div",J,[(r(!0),l(k,null,V(v.value,t=>(r(),m(P,{stat:t,key:t.title},{default:c(()=>[h(w,null,{default:c(()=>[o("div",K,[h(T,{onClick:se=>S(t.id),title:"Eliminar",icon:s(D)},null,8,["onClick","icon"])])]),_:2},1024)]),_:2},1032,["stat"]))),128))])),h(j,{show:p.value,title:"Resultado",onOnCancel:b,onOnSubmit:q},{default:c(()=>[i.hours.length==0?(r(),l("div",Q,' No se encontraron turnos disponibles para el dia en curso. Por favor, verifique la disponibilidad en "Horario" ')):(r(),m(N,{key:1,modelValue:s(e).hour,"onUpdate:modelValue":n[1]||(n[1]=t=>s(e).hour=t),text:"Turno",required:""},{default:c(()=>[X,(r(!0),l(k,null,V(i.hours,t=>(r(),l("option",{value:t},u(s(f).create().setTime(t).getTimeFormat()),9,Z))),256))]),_:1},8,["modelValue"])),i.settings.date?(r(),m(y,{key:2,modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=t=>g.value=t),type:"date",text:"Fecha",required:""},null,8,["modelValue"])):(r(),m(y,{key:3,modelValue:s(e).number,"onUpdate:modelValue":n[3]||(n[3]=t=>s(e).number=t),type:"number",text:"Numero",required:""},null,8,["modelValue"])),ee,s(e).number&&s(e).hour?(r(),l("div",te,[C(" Agregando el numero ganador: "),o("span",re,u(s(e).number),1),C(" a la rifa "+u(i.raffle.name)+" para el turno de las "+u(s(f).create().setTime(s(e).hour).getTimeFormat())+" del corriente dia: "+u(s(f).create().format("d/m/Y"))+". ",1)])):I("",!0)]),_:1},8,["show"])]),_:1}))}};export{ge as default};
