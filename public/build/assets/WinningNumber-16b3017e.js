import{_ as w,a as T}from"./Dropdown-fd48ece6.js";import{_ as y}from"./InputForm-222676cb.js";import{_ as N}from"./SelectForm-61e7823e.js";import{_ as j}from"./FormModal-1b26856b.js";import{o as r,c as u,b as n,t as d,m as E,r as x,T as O,h as F,j as I,g as f,e as m,F as k,k as V,a as h,u as s,f as C,d as B}from"./app-b6b7e460.js";import{_ as A}from"./ClientareaLayout-cfdfc05d.js";import{C as p}from"./Carbon-e7b34390.js";import{c as $,I as D}from"./helpers-b143e788.js";import{t as c}from"./toast-9cfbfd04.js";import{c as G}from"./IconUser-14aeb8a1.js";import"./use-resolve-button-type-c7bfd956.js";import"./IconList-a023fffa.js";import"./_plugin-vue_export-helper-c27b6911.js";var U=G("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);const L={class:"bg-card h-20 rounded-xl"},M={class:"flex h-full items-center justify-between p-4"},Y={class:"text-gray-600"},z={class:"font-bold text-lg"},H={class:"text-sm"},P={__name:"StatCardActions",props:{stat:{type:Object,required:!0}},setup(l){return(o,g)=>(r(),u("div",L,[n("div",M,[n("div",Y,[n("div",z,d(l.stat.value),1),n("div",H,d(l.stat.title),1)]),n("div",null,[E(o.$slots,"default")])])]))}},R=n("span",{class:"title"}," Ganadores ",-1),W={key:0,class:"w-full text-center text-gray-400 mb-4"},J={key:1,class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4"},K={class:"px-1 py-1"},Q={key:0,class:"text-red-500 mb-4"},X=n("option",{value:"",disabled:"",selected:""},"Seleccione un turno",-1),Z=["value"],ee=n("div",{class:"text-gray-400 text-sm"}," Verifique que los datos ingresados sean correctos antes de guardar, ya que para garantizar la integridad de los datos no se permite eliminar ni editar los resultados. ",-1),te={key:4,class:"mt-5 text-basic"},re={class:"font-bold"},be={__name:"WinningNumber",props:{winning_numbers:{type:Object,required:!0},hours:{type:Object,required:!0},settings:{type:Object,required:!0},raffle:{type:Object,required:!0}},setup(l){const o=l,g=x(!1),_=x(""),e=O({number:null,hour:null}),v=F(()=>o.winning_numbers.map(a=>({id:a.id,title:"Turno: "+p.create().setTime(a.hour).getTimeFormat(),value:"Dígito: "+a.number,icon:U})));function b(){e.reset(),g.value=!1}I(()=>_.value,a=>{a?e.number=p.create(a).format("d/m"):e.number=null});const q=()=>{if(o.winning_numbers.find(a=>a.hour==e.hour)){c.error("Ya existe un resultado para este turno");return}if(o.settings.max){if(e.number.length>o.settings.max.length){c.error("Los números solo pueden contener "+o.settings.max.length+" digitos");return}if(parseInt(e.number)>parseInt(o.settings.max)){c.error("El número ingresado supera el máximo permitido: "+o.settings.max);return}}$({title:"Confirmar",message:"¿Esta seguro de agregar este resultado?",onConfirm:()=>{e.post(route("clientarea.raffles.winning-numbers.store",o.raffle.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),c.success("Guardado correctamente")}})}})};function S(a){$({message:"¿Está seguro de eliminar este registro?",onConfirm:()=>{e.delete(route("clientarea.raffles.winning-numbers.destroy",[o.raffle.id,a]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{b(),c.success("Eliminado correctamente")},onError:i=>{c.error(i.message)}})}})}return(a,i)=>(r(),f(A,{title:"Ganadores"},{header:m(()=>[R,n("button",{type:"button",class:"simple-button",onClick:i[0]||(i[0]=t=>g.value=!0)}," Nuevo ")]),default:m(()=>[v.value.length==0?(r(),u("div",W," No hay resultados ")):(r(),u("div",J,[(r(!0),u(k,null,V(v.value,t=>(r(),f(P,{stat:t,key:t.title},{default:m(()=>[h(w,null,{default:m(()=>[n("div",K,[h(T,{onClick:se=>S(t.id),title:"Eliminar",icon:s(D)},null,8,["onClick","icon"])])]),_:2},1024)]),_:2},1032,["stat"]))),128))])),h(j,{show:g.value,title:"Resultado",onOnCancel:b,onOnSubmit:q},{default:m(()=>[l.hours.length==0?(r(),u("div",Q,' No se encontraron turnos disponibles para el dia en curso. Por favor, verifique la disponibilidad en "Horario" ')):(r(),f(N,{key:1,modelValue:s(e).hour,"onUpdate:modelValue":i[1]||(i[1]=t=>s(e).hour=t),text:"Turno",required:""},{default:m(()=>[X,(r(!0),u(k,null,V(l.hours,t=>(r(),u("option",{value:t},d(s(p).create().setTime(t).getTimeFormat()),9,Z))),256))]),_:1},8,["modelValue"])),l.settings.date?(r(),f(y,{key:2,modelValue:_.value,"onUpdate:modelValue":i[2]||(i[2]=t=>_.value=t),type:"date",text:"Fecha",required:""},null,8,["modelValue"])):(r(),f(y,{key:3,modelValue:s(e).number,"onUpdate:modelValue":i[3]||(i[3]=t=>s(e).number=t),type:"number",text:"Numero",required:""},null,8,["modelValue"])),ee,s(e).number&&s(e).hour?(r(),u("div",te,[C(" Agregando el numero ganador: "),n("span",re,d(s(e).number),1),C(" a la rifa "+d(l.raffle.name)+" para el turno de las "+d(s(p).create().setTime(s(e).hour).getTimeFormat())+" del corriente dia: "+d(s(p).create().format("d/m/Y"))+". ",1)])):B("",!0)]),_:1},8,["show"])]),_:1}))}};export{be as default};
